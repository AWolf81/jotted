{"version":3,"file":null,"sources":["/home/mokush/dev/jotted/src/util.js","/home/mokush/dev/jotted/src/template.js","/home/mokush/dev/jotted/src/plugin.js","/home/mokush/dev/jotted/src/script.js","/home/mokush/dev/jotted/src/pubsoup.js","/home/mokush/dev/jotted/src/plugins/ace.js","/home/mokush/dev/jotted/src/plugins/codemirror.js","/home/mokush/dev/jotted/src/plugins/less.js","/home/mokush/dev/jotted/src/plugins/coffeescript.js","/home/mokush/dev/jotted/src/plugins/stylus.js","/home/mokush/dev/jotted/src/plugins/babel.js","/home/mokush/dev/jotted/src/plugins/markdown.js","/home/mokush/dev/jotted/src/bundle-plugins.js","/home/mokush/dev/jotted/src/core.js"],"sourcesContent":["/* util\n */\n\nfunction extend (obj = {}, defaults = {}) {\n  var extended = {}\n  // clone object\n  Object.keys(obj).forEach(function (key) {\n    extended[key] = obj[key]\n  })\n\n  // copy default keys where undefined\n  Object.keys(defaults).forEach(function (key) {\n    if (typeof extended[key] !== 'undefined') {\n      extended[key] = obj[key]\n    } else {\n      extended[key] = defaults[key]\n    }\n  })\n\n  return extended\n}\n\nfunction fetch (url, callback) {\n  var xhr = new window.XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'text'\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      callback(null, xhr.responseText)\n    } else {\n      callback(url, xhr)\n    }\n  }\n\n  xhr.onerror = function (err) {\n    callback(err)\n  }\n\n  xhr.send()\n}\n\nfunction runCallback (index, params, arr, errors, callback) {\n  return function (err, res) {\n    if (err) {\n      errors.push(err)\n    }\n\n    index++\n    if (index === arr.length) {\n      callback(errors, res)\n    } else {\n      seqRunner(index, res, arr, errors, callback)\n    }\n  }\n}\n\nfunction seqRunner (index, params, arr, errors, callback) {\n  // async\n  arr[index](params, runCallback.apply(this, arguments))\n}\n\nfunction seq (arr, params, callback = function () {}) {\n  var errors = []\n\n  if (!arr.length) {\n    return callback(errors, params)\n  }\n\n  seqRunner(0, params, arr, errors, callback)\n}\n\nfunction debounce (fn, delay) {\n  var timer = null\n  return function () {\n    var args = arguments\n    clearTimeout(timer)\n\n    timer = setTimeout(() => {\n      fn.apply(this, args)\n    }, delay)\n  }\n}\n\nfunction log () {\n  console.log(arguments)\n}\n\nfunction hasClass (node, className) {\n  if (!node.className) {\n    return false\n  }\n  var tempClass = ' ' + node.className + ' '\n  className = ' ' + className + ' '\n\n  if (tempClass.indexOf(className) !== -1) {\n    return true\n  }\n\n  return false\n}\n\nfunction addClass (node, className) {\n  // class is already added\n  if (hasClass(node, className)) {\n    return node.className\n  }\n\n  if (node.className) {\n    className = ' ' + className\n  }\n\n  node.className += className\n\n  return node.className\n}\n\nfunction removeClass (node, className) {\n  var spaceBefore = ' ' + className\n  var spaceAfter = className + ' '\n\n  if (node.className.indexOf(spaceBefore) !== -1) {\n    node.className = node.className.replace(spaceBefore, '')\n  } else if (node.className.indexOf(spaceAfter) !== -1) {\n    node.className = node.className.replace(spaceAfter, '')\n  } else {\n    node.className = node.className.replace(className, '')\n  }\n\n  return node.className\n}\n\nfunction data (node, attr) {\n  return node.getAttribute('data-' + attr)\n}\n\nexport {\n  extend,\n  fetch,\n  seq,\n  debounce,\n  log,\n\n  data,\n  hasClass,\n  addClass,\n  removeClass\n}\n","/* template\n */\n\nexport function container () {\n  return `\n    <ul class=\"jotted-nav\">\n      <li class=\"jotted-nav-item jotted-nav-item-result\">\n        <a href=\"#\" data-jotted-type=\"result\">\n          Result\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-html\">\n        <a href=\"#\" data-jotted-type=\"html\">\n          HTML\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-css\">\n        <a href=\"#\" data-jotted-type=\"css\">\n          CSS\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-js\">\n        <a href=\"#\" data-jotted-type=\"js\">\n          JavaScript\n        </a>\n      </li>\n    </ul>\n    <div class=\"jotted-pane jotted-pane-result\"><iframe></iframe></div>\n    <div class=\"jotted-pane jotted-pane-html\"></div>\n    <div class=\"jotted-pane jotted-pane-css\"></div>\n    <div class=\"jotted-pane jotted-pane-js\"></div>\n  `\n}\n\nexport function paneActiveClass (type) {\n  return `jotted-pane-active-${type}`\n}\n\nexport function containerClass () {\n  return `jotted`\n}\n\nexport function hasFileClass (type) {\n  return `jotted-has-${type}`\n}\n\nexport function editorClass (type) {\n  return `jotted-editor jotted-editor-${type}`\n}\n\nexport function editorContent (type, fileUrl = '') {\n  return `\n    <textarea data-jotted-type=\"${type}\" data-jotted-file=\"${fileUrl}\"></textarea>\n    <div class=\"jotted-status\"></div>\n  `\n}\n\nexport function statusMessage (err) {\n  return `\n    <p>${err}</p>\n  `\n}\n\nexport function statusClass (type) {\n  return `jotted-status-${type}`\n}\n\nexport function statusActiveClass (type) {\n  return `jotted-status-active-${type}`\n}\n\nexport function pluginClass (name) {\n  return `jotted-plugin-${name}`\n}\n\nexport function frameContent (body = '') {\n  return `\n    <!doctype html>\n    <html>\n    <head>\n    </head>\n    <body>\n    ${body}\n    </body>\n    </html>\n  `\n}\n\nexport function statusLoading (url) {\n  return `Loading <strong>${url}</strong>..`\n}\n\nexport function statusFetchError (url) {\n  return `There was an error loading <strong>${url}</strong>.`\n}\n","/* plugin\n */\n\nimport * as util from './util.js'\nimport * as template from './template.js'\n\nvar plugins = []\n\nfunction find (id) {\n  for (let pluginIndex in plugins) {\n    let plugin = plugins[pluginIndex]\n    if (plugin._id === id) {\n      return plugin\n    }\n  }\n\n  // can't find plugin\n  throw new Error(`Plugin ${id} is not registered.`)\n}\n\nfunction register (id, plugin) {\n  // private properties\n  plugin._id = id\n  plugins.push(plugin)\n}\n\n// create a new instance of each plugin, on the jotted instance\nfunction init () {\n  this._get('options').plugins.forEach((plugin) => {\n    // check if plugin definition is string or object\n    let Plugin\n    let pluginName\n    let pluginOptions = {}\n    if (typeof plugin === 'string') {\n      pluginName = plugin\n    } else if (typeof plugin === 'object') {\n      pluginName = plugin.name\n      pluginOptions = plugin.options || {}\n    }\n\n    Plugin = find(pluginName)\n    this._get('plugins')[plugin] = new Plugin(this, pluginOptions)\n\n    util.addClass(this._get('$container'), template.pluginClass(pluginName))\n  })\n}\n\nexport {\n  register,\n  init\n}\n","/* script tag runner\n */\n\nimport * as util from './util.js'\n\n/* re-insert script tags\n */\nfunction insertScript (frameWindow, $script, callback = function () {}) {\n  var s = document.createElement('script')\n  s.type = 'text/javascript'\n  if ($script.src) {\n    s.onload = () => {\n      // use the timeout trick to make sure the script is garbage collected,\n      // when the iframe is destroyed.\n      // sometimes when loading large files (eg. babel.js)\n      // and a change is triggered,\n      // the seq runner skips loading jotted.js, and runs the inline script\n      // causing a `Jotted is undefined` error.\n      setTimeout(callback)\n    }\n    s.onerror = callback\n    s.src = $script.src\n  } else {\n    s.textContent = $script.textContent\n  }\n\n  // re-insert the script tag so it executes.\n  frameWindow.document.body.appendChild(s)\n\n  // clean-up\n  $script.parentNode.removeChild($script)\n\n  // run the callback immediately for inline scripts\n  if (!$script.src) {\n    callback()\n  }\n}\n\n// re-trigger DOMContentLoaded after the scripts finish loading\n// because that's the browser behaviour, and some loaded scripts could rely on it\n// (eg. babel browser.js)\nfunction scriptsDone (frameWindow) {\n  var DOMContentLoadedEvent = document.createEvent('Event')\n  DOMContentLoadedEvent.initEvent('DOMContentLoaded', true, true)\n  frameWindow.document.dispatchEvent(DOMContentLoadedEvent)\n}\n\n// https://developer.mozilla.org/en/docs/Web/HTML/Element/script\nvar runScriptTypes = [\n  'text/javascript',\n  'text/ecmascript',\n  'application/javascript',\n  'application/ecmascript'\n]\n\nexport default function runScripts ($resultFrame, callback = function () {}) {\n  // get scripts tags from content added with innerhtml\n  var frameWindow = $resultFrame.contentWindow\n  var $scripts = frameWindow.document.body.querySelectorAll('script')\n  var l = $scripts.length\n  var runList = []\n  var typeAttr\n\n  for (let i = 0; i < l; i++) {\n    typeAttr = $scripts[i].getAttribute('type')\n\n    // only run script tags without type attribute\n    // or with a standard attribute value\n    if (!typeAttr || runScriptTypes.indexOf(typeAttr) !== -1) {\n      runList.push((params, callback) => {\n        insertScript.call(this, frameWindow, $scripts[i], callback)\n      })\n    }\n  }\n\n  // insert the script tags sequentially\n  // so we preserve execution order\n  util.seq(runList, {}, function () {\n    scriptsDone(frameWindow)\n    callback()\n  })\n}\n","/* pubsoup\n */\n\nimport * as util from './util.js'\n\nexport default class PubSoup {\n  constructor () {\n    this.topics = {}\n    this.callbacks = {}\n  }\n\n  find (query) {\n    this.topics[query] = this.topics[query] || []\n    return this.topics[query]\n  }\n\n  subscribe (topic, subscriber, priority = 90) {\n    var foundTopic = this.find(topic)\n    subscriber._priority = priority\n    foundTopic.push(subscriber)\n\n    // sort subscribers on priority\n    foundTopic.sort(function (a, b) {\n      return (a._priority > b._priority) ? 1 : ((b._priority > a._priority) ? -1 : 0)\n    })\n  }\n\n  unsubscribe (topic, subscriber) {\n    var foundTopic = this.find(topic)\n    foundTopic.forEach(function (t) {\n      // if no subscriber is specified\n      // remove all subscribers\n      if (!subscriber) {\n        t.length = 0\n        return\n      }\n\n      // find the subscriber in the topic\n      var index = [].indexOf.call(t, subscriber)\n\n      // show an error if we didn't find the subscriber\n      if (index === -1) {\n        return util.log('Subscriber not found in topic')\n      }\n\n      t.splice(index, 1)\n    })\n  }\n\n  // sequentially runs a method on all plugins\n  publish (topic, params = {}) {\n    var foundTopic = this.find(topic)\n    var runList = []\n\n    foundTopic.forEach(function (subscriber) {\n      runList.push(subscriber)\n    })\n\n    util.seq(runList, params, this.runCallbacks(topic))\n  }\n\n  // parallel run all .done callbacks\n  runCallbacks (topic) {\n    var pub = this\n    return function () {\n      pub.callbacks[topic] = pub.callbacks[topic] || []\n\n      pub.callbacks[topic].forEach((c) => {\n        c.apply(this, arguments)\n      })\n    }\n  }\n\n  // attach a callback when a publish[topic] is done\n  done (topic, callback = function () {}) {\n    this.callbacks[topic] = this.callbacks[topic] || []\n    this.callbacks[topic].push(callback)\n  }\n}\n","/* ace plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginAce {\n  constructor (jotted, options) {\n    var priority = 1\n    var i\n\n    this.editor = {}\n\n    this.modemap = {\n      'html': 'html',\n      'css': 'css',\n      'js': 'javascript',\n      'less': 'less',\n      'coffee': 'coffeescript'\n    }\n\n    options = util.extend(options, {})\n\n    // check if Ace is loaded\n    if (typeof window.ace === 'undefined') {\n      return\n    }\n\n    var $editors = jotted.$container.querySelectorAll('.jotted-editor')\n\n    for (i = 0; i < $editors.length; i++) {\n      let $textarea = $editors[i].querySelector('textarea')\n      let type = util.data($textarea, 'jotted-type')\n      let file = util.data($textarea, 'jotted-file')\n\n      let $aceContainer = document.createElement('div')\n      $editors[i].appendChild($aceContainer)\n\n      this.editor[type] = window.ace.edit($aceContainer)\n      let editor = this.editor[type]\n\n      let editorOptions = util.extend(options)\n\n      editor.getSession().setMode(this.aceMode(type, file))\n      editor.getSession().setOptions(editorOptions)\n\n      editor.$blockScrolling = Infinity\n\n      editor.on('change', () => {\n        $textarea.value = editor.getValue()\n\n        // trigger a change event\n        jotted.trigger('change', {\n          aceEditor: editor,\n          type: type,\n          file: file,\n          content: $textarea.value\n        })\n      })\n    }\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  change (params, callback) {\n    var editor = this.editor[params.type]\n\n    // if the event is not started by the ace change\n    if (!params.aceEditor) {\n      editor.getSession().setValue(params.content)\n    }\n\n    // manipulate the params and pass them on\n    params.content = editor.getValue()\n    callback(null, params)\n  }\n\n  aceMode (type, file) {\n    var mode = 'ace/mode/'\n\n    // try the file extension\n    for (let key in this.modemap) {\n      if (file.indexOf('.' + key) !== -1) {\n        return mode + this.modemap[key]\n      }\n    }\n\n    // try the file type (html/css/js)\n    for (let key in this.modemap) {\n      if (type === key) {\n        return mode + this.modemap[key]\n      }\n    }\n\n    return mode + type\n  }\n}\n","/* coremirror plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginCodeMirror {\n  constructor (jotted, options) {\n    var priority = 1\n    var i\n\n    this.editor = {}\n\n    options = util.extend(options, {\n      lineNumbers: true\n    })\n\n    // check if CodeMirror is loaded\n    if (typeof window.CodeMirror === 'undefined') {\n      return\n    }\n\n    var $editors = jotted.$container.querySelectorAll('.jotted-editor')\n\n    for (i = 0; i < $editors.length; i++) {\n      let $textarea = $editors[i].querySelector('textarea')\n      let type = util.data($textarea, 'jotted-type')\n      let file = util.data($textarea, 'jotted-file')\n\n      this.editor[type] = window.CodeMirror.fromTextArea($textarea, options)\n      let editor = this.editor[type]\n\n      editor.on('change', () => {\n        $textarea.value = editor.getValue()\n\n        // trigger a change event\n        jotted.trigger('change', {\n          cmEditor: editor,\n          type: type,\n          file: file,\n          content: $textarea.value\n        })\n      })\n    }\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  change (params, callback) {\n    var editor = this.editor[params.type]\n\n    // if the event is not started by the codemirror change\n    if (!params.cmEditor) {\n      editor.setValue(params.content)\n    }\n\n    // manipulate the params and pass them on\n    params.content = editor.getValue()\n    callback(null, params)\n  }\n}\n","/* less plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginLess {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if less is loaded\n    if (typeof window.less === 'undefined') {\n      return\n    }\n\n    // change CSS link label to Less\n    jotted.$container.querySelector('a[data-jotted-type=\"css\"]').innerHTML = 'Less'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isLess (params) {\n    if (params.type !== 'css') {\n      return false\n    }\n\n    return (params.file.indexOf('.less') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .less and blank files\n    if (this.isLess(params)) {\n      window.less.render(params.content, this.options, (err, res) => {\n        if (err) {\n          return callback(err, params)\n        } else {\n          // replace the content with the parsed less\n          params.content = res.css\n        }\n\n        callback(null, params)\n      })\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* coffeescript plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginCoffeeScript {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if coffeescript is loaded\n    if (typeof window.CoffeeScript === 'undefined') {\n      return\n    }\n\n    // change JS link label to Less\n    jotted.$container.querySelector('a[data-jotted-type=\"js\"]').innerHTML = 'CoffeeScript'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isCoffee (params) {\n    if (params.type !== 'js') {\n      return false\n    }\n\n    return (params.file.indexOf('.coffee') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .less and blank files\n    if (this.isCoffee(params)) {\n      try {\n        params.content = window.CoffeeScript.compile(params.content)\n      } catch (err) {\n        return callback(err, params)\n      }\n    }\n\n    callback(null, params)\n  }\n}\n","/* stylus plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginStylus {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if stylus is loaded\n    if (typeof window.stylus === 'undefined') {\n      return\n    }\n\n    // change CSS link label to Stylus\n    jotted.$container.querySelector('a[data-jotted-type=\"css\"]').innerHTML = 'Stylus'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isStylus (params) {\n    if (params.type !== 'css') {\n      return false\n    }\n\n    return (params.file.indexOf('.styl') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .styl and blank files\n    if (this.isStylus(params)) {\n      window.stylus(params.content, this.options).render((err, res) => {\n        if (err) {\n          return callback(err, params)\n        } else {\n          // replace the content with the parsed less\n          params.content = res\n        }\n\n        callback(null, params)\n      })\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* babel plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginBabel {\n  constructor (jotted, options) {\n    var priority = 20\n\n    this.options = util.extend(options, {})\n\n    // check if babel is loaded\n    if (typeof window.Babel !== 'undefined') {\n      // using babel-standalone\n      this.babel = window.Babel\n    } else if (typeof window.babel !== 'undefined') {\n      // using browser.js from babel-core 5.x\n      this.babel = {\n        transform: window.babel\n      }\n    } else {\n      return\n    }\n\n    // change js link label\n    jotted.$container.querySelector('a[data-jotted-type=\"js\"]').innerHTML = 'ES2015'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  change (params, callback) {\n    // only parse js content\n    if (params.type === 'js') {\n      try {\n        params.content = this.babel.transform(params.content, this.options).code\n      } catch (err) {\n        return callback(err, params)\n      }\n\n      callback(null, params)\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* markdown plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginMarkdown {\n  constructor (jotted, options) {\n    var priority = 20\n\n    this.options = util.extend(options, {})\n\n    // check if marked is loaded\n    if (typeof window.marked === 'undefined') {\n      return\n    }\n\n    window.marked.setOptions(options)\n\n    // change html link label\n    jotted.$container.querySelector('a[data-jotted-type=\"html\"]').innerHTML = 'Markdown'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  change (params, callback) {\n    // only parse html content\n    if (params.type === 'html') {\n      try {\n        params.content = window.marked(params.content)\n      } catch (err) {\n        return callback(err, params)\n      }\n\n      callback(null, params)\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* jotted\n */\n\n// register bundled plugins\nimport PluginAce from './plugins/ace.js'\nimport PluginCodeMirror from './plugins/codemirror.js'\nimport PluginLess from './plugins/less.js'\nimport PluginCoffeeScript from './plugins/coffeescript.js'\nimport PluginStylus from './plugins/stylus.js'\nimport PluginBabel from './plugins/babel.js'\nimport PluginMarkdown from './plugins/markdown.js'\n\nexport default function BundlePlugins (jotted) {\n  jotted.plugin('codemirror', PluginCodeMirror)\n  jotted.plugin('ace', PluginAce)\n  jotted.plugin('less', PluginLess)\n  jotted.plugin('coffeescript', PluginCoffeeScript)\n  jotted.plugin('stylus', PluginStylus)\n  jotted.plugin('babel', PluginBabel)\n  jotted.plugin('markdown', PluginMarkdown)\n}\n","/* jotted\n */\n\nimport * as util from './util.js'\nimport * as template from './template.js'\nimport * as plugin from './plugin.js'\nimport script from './script.js'\nimport PubSoup from './pubsoup.js'\n\nclass Jotted {\n  constructor ($jottedContainer, opts) {\n    if (!$jottedContainer) {\n      throw new Error('Can\\'t find Jotted container.')\n    }\n\n    // private data\n    var _private = {}\n    this._get = function (key) {\n      return _private[key]\n    }\n    this._set = function (key, value) {\n      _private[key] = value\n      return _private[key]\n    }\n\n    // options\n    var options = this._set('options', util.extend(opts, {\n      files: [],\n      showBlank: false,\n      runScripts: true,\n      pane: 'result',\n      debounce: 250,\n      plugins: []\n    }))\n\n    // PubSoup\n    var pubsoup = this._set('pubsoup', new PubSoup())\n    // debounced trigger method\n    this._set('trigger', util.debounce(pubsoup.publish.bind(pubsoup), options.debounce))\n    this._set('on', function () {\n      pubsoup.subscribe.apply(pubsoup, arguments)\n    })\n    this._set('off', function () {\n      pubsoup.unsubscribe.apply(pubsoup, arguments)\n    })\n    var done = this._set('done', function () {\n      pubsoup.done.apply(pubsoup, arguments)\n    })\n\n    // done change on all subscribers,\n    // render the results.\n    done('change', this.changeCallback.bind(this))\n\n    // DOM\n    var $container = this._set('$container', $jottedContainer)\n    $container.innerHTML = template.container()\n    util.addClass($container, template.containerClass())\n\n    // default pane\n    var paneActive = this._set('paneActive', options.pane)\n    util.addClass($container, template.paneActiveClass(paneActive))\n\n    // file content caching\n    this._set('content', {\n      html: '',\n      css: '',\n      js: ''\n    })\n\n    // status nodes\n    this._set('$status', {})\n\n    for (let type of [ 'html', 'css', 'js' ]) {\n      this.markup(type)\n    }\n\n    // change events\n    $container.addEventListener('change', util.debounce(this.change.bind(this), options.debounce))\n    $container.addEventListener('keyup', util.debounce(this.change.bind(this), options.debounce))\n\n    // pane change\n    $container.addEventListener('click', this.pane.bind(this))\n\n    // expose public properties\n    this.$container = this._get('$container')\n    this.on = this._get('on')\n    this.off = this._get('off')\n    this.done = this._get('done')\n    this.trigger = this._get('trigger')\n    this.paneActive = this._get('paneActive')\n\n    // init plugins\n    this._set('plugins', {})\n    plugin.init.call(this)\n\n    // load files\n    for (let type of [ 'html', 'css', 'js' ]) {\n      this.load(type)\n    }\n\n    // show all tabs, even if empty\n    if (options.showBlank) {\n      for (let type of [ 'html', 'css', 'js' ]) {\n        util.addClass($container, template.hasFileClass(type))\n      }\n    }\n  }\n\n  findFile (type) {\n    var file = {}\n    var options = this._get('options')\n\n    for (let fileIndex in options.files) {\n      let file = options.files[fileIndex]\n      if (file.type === type) {\n        return file\n      }\n    }\n\n    return file\n  }\n\n  markup (type) {\n    var $container = this._get('$container')\n    var $parent = $container.querySelector(`.jotted-pane-${type}`)\n    // create the markup for an editor\n    var file = this.findFile(type)\n\n    var $editor = document.createElement('div')\n    $editor.innerHTML = template.editorContent(type, file.url)\n    $editor.className = template.editorClass(type)\n\n    $parent.appendChild($editor)\n\n    // get the status node\n    this._get('$status')[type] = $parent.querySelector('.jotted-status')\n\n    // if we have a file for the current type\n    if (typeof file.url !== 'undefined' || typeof file.content !== 'undefined') {\n      // add the has-type class to the container\n      util.addClass($container, template.hasFileClass(type))\n    }\n  }\n\n  load (type) {\n    // create the markup for an editor\n    var file = this.findFile(type)\n    var $textarea = this._get('$container').querySelector(`.jotted-pane-${type} textarea`)\n\n    // file as string\n    if (typeof file.content !== 'undefined') {\n      this.setValue($textarea, file.content)\n    } else if (typeof file.url !== 'undefined') {\n      // show loading message\n      this.status('loading', [ template.statusLoading(file.url) ], {\n        type: type,\n        file: file\n      })\n\n      // file as url\n      util.fetch(file.url, (err, res) => {\n        if (err) {\n          // show load errors\n          this.status('error', [ template.statusFetchError(err) ], {\n            type: type\n          })\n\n          return\n        }\n\n        // clear the loading status\n        this.clearStatus('loading', {\n          type: type\n        })\n\n        this.setValue($textarea, res)\n      })\n    }\n  }\n\n  setValue ($textarea, val) {\n    $textarea.value = val\n\n    // trigger change event, for initial render\n    this.change({\n      target: $textarea\n    })\n  }\n\n  change (e) {\n    if (!util.data(e.target, 'jotted-type')) {\n      return\n    }\n\n    // don't use .trigger,\n    // so we don't debounce different change calls (html, css, js)\n    // causing only one of them to be inserted.\n    // the textarea change event is debounced when attached.\n    this._get('pubsoup').publish('change', {\n      type: util.data(e.target, 'jotted-type'),\n      file: util.data(e.target, 'jotted-file'),\n      content: e.target.value\n    })\n  }\n\n  runJS (errors, content) {\n    var $container = this._get('$container')\n    var $resultFrame = $container.querySelector('.jotted-pane-result iframe')\n\n    // catch and show js errors\n    try {\n      $resultFrame.contentWindow.eval(content)\n    } catch (err) {\n      // only show eval errors if we don't have other errors from plugins.\n      // useful for preprocessor error reporting (eg. babel, coffeescript).\n      if (!errors.length) {\n        this.status('error', [ err.message ], {\n          type: 'js'\n        })\n      }\n    }\n  }\n\n  changeCallback (errors, params) {\n    this.status('error', errors, params)\n    var options = this._get('options')\n\n    var $container = this._get('$container')\n    var $resultPane = $container.querySelector('.jotted-pane-result')\n    var $resultFrame = $resultPane.querySelector('iframe')\n\n    // if we have script execution enabled,\n    // re-create the iframe,\n    // to stop execution of any previously started js,\n    // and garbage collect it.\n    if (options.runScripts) {\n      $resultPane.removeChild($resultFrame)\n\n      $resultFrame = document.createElement('iframe')\n      $resultPane.appendChild($resultFrame)\n    }\n\n    // refresh the iframe\n    var $frameDoc = $resultFrame.contentWindow.document\n    $frameDoc.open()\n    $frameDoc.write(template.frameContent())\n    $frameDoc.close()\n\n    // cache manipulated content\n    var cachedContent = this._get('content')\n    cachedContent[params.type] = params.content\n\n    // set html\n    $frameDoc.body.innerHTML = cachedContent['html']\n\n    // set css\n    var $styleInject = document.createElement('style')\n    $styleInject.textContent = cachedContent['css']\n    $frameDoc.head.appendChild($styleInject)\n\n    // set js\n    // if runScripts, run js after inline script tags are loaded\n    if (options.runScripts) {\n      script.call(this, $resultFrame, () => {\n        this.runJS(errors, cachedContent['js'])\n      })\n    } else {\n      // otherwise run it immediately\n      this.runJS(errors, cachedContent['js'])\n    }\n  }\n\n  pane (e) {\n    if (!util.data(e.target, 'jotted-type')) {\n      return\n    }\n\n    var $container = this._get('$container')\n    var paneActive = this._get('paneActive')\n    util.removeClass($container, template.paneActiveClass(paneActive))\n\n    paneActive = this._set('paneActive', util.data(e.target, 'jotted-type'))\n    util.addClass($container, template.paneActiveClass(paneActive))\n\n    e.preventDefault()\n  }\n\n  status (statusType = 'error', messages = [], params = {}) {\n    if (!messages.length) {\n      return this.clearStatus(statusType, params)\n    }\n\n    var $status = this._get('$status')\n\n    // add error/loading class to status\n    util.addClass($status[params.type], template.statusClass(statusType))\n\n    util.addClass(this._get('$container'), template.statusActiveClass(params.type))\n\n    var markup = ''\n    messages.forEach(function (err) {\n      markup += template.statusMessage(err)\n    })\n\n    $status[params.type].innerHTML = markup\n  }\n\n  clearStatus (statusType, params) {\n    var $status = this._get('$status')\n\n    util.removeClass($status[params.type], template.statusClass(statusType))\n    util.removeClass(this._get('$container'), template.statusActiveClass(params.type))\n    $status[params.type].innerHTML = ''\n  }\n}\n\n// register plugins\nJotted.plugin = function () {\n  return plugin.register.apply(this, arguments)\n}\n\n// register bundled plugins\nimport BundlePlugins from './bundle-plugins.js'\nBundlePlugins(Jotted)\n\nexport default Jotted\n"],"names":["template.pluginClass","util.log","util.extend","util.data","util.debounce","template.container","template.containerClass","template.paneActiveClass","template.hasFileClass","template.editorContent","template.editorClass","template.statusLoading","template.statusFetchError","template.frameContent","template.statusClass","template.statusActiveClass","template.statusMessage","plugin.register"],"mappings":"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"}