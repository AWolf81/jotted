{"version":3,"file":null,"sources":["/run/media/mokush/work/dev/jotted/src/template.js","/run/media/mokush/work/dev/jotted/src/util.js","/run/media/mokush/work/dev/jotted/src/plugin.js","/run/media/mokush/work/dev/jotted/src/pubsoup.js","/run/media/mokush/work/dev/jotted/src/plugins/play.js","/run/media/mokush/work/dev/jotted/src/plugins/console.js","/run/media/mokush/work/dev/jotted/src/plugins/markdown.js","/run/media/mokush/work/dev/jotted/src/plugins/babel.js","/run/media/mokush/work/dev/jotted/src/plugins/stylus.js","/run/media/mokush/work/dev/jotted/src/plugins/coffeescript.js","/run/media/mokush/work/dev/jotted/src/plugins/less.js","/run/media/mokush/work/dev/jotted/src/plugins/codemirror.js","/run/media/mokush/work/dev/jotted/src/plugins/ace.js","/run/media/mokush/work/dev/jotted/src/plugins/scriptless.js","/run/media/mokush/work/dev/jotted/src/plugins/render.js","/run/media/mokush/work/dev/jotted/src/bundle-plugins.js","/run/media/mokush/work/dev/jotted/src/core.js"],"sourcesContent":["/* template\n */\n\nexport function container () {\n  return `\n    <ul class=\"jotted-nav\">\n      <li class=\"jotted-nav-item jotted-nav-item-result\">\n        <a href=\"#\" data-jotted-type=\"result\">\n          Result\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-html\">\n        <a href=\"#\" data-jotted-type=\"html\">\n          HTML\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-css\">\n        <a href=\"#\" data-jotted-type=\"css\">\n          CSS\n        </a>\n      </li>\n      <li class=\"jotted-nav-item jotted-nav-item-js\">\n        <a href=\"#\" data-jotted-type=\"js\">\n          JavaScript\n        </a>\n      </li>\n    </ul>\n    <div class=\"jotted-pane jotted-pane-result\"><iframe></iframe></div>\n    <div class=\"jotted-pane jotted-pane-html\"></div>\n    <div class=\"jotted-pane jotted-pane-css\"></div>\n    <div class=\"jotted-pane jotted-pane-js\"></div>\n  `\n}\n\nexport function paneActiveClass (type) {\n  return `jotted-pane-active-${type}`\n}\n\nexport function containerClass () {\n  return `jotted`\n}\n\nexport function hasFileClass (type) {\n  return `jotted-has-${type}`\n}\n\nexport function editorClass (type) {\n  return `jotted-editor jotted-editor-${type}`\n}\n\nexport function editorContent (type, fileUrl = '') {\n  return `\n    <textarea data-jotted-type=\"${type}\" data-jotted-file=\"${fileUrl}\"></textarea>\n    <div class=\"jotted-status\"></div>\n  `\n}\n\nexport function statusMessage (err) {\n  return `\n    <p>${err}</p>\n  `\n}\n\nexport function statusClass (type) {\n  return `jotted-status-${type}`\n}\n\nexport function statusActiveClass (type) {\n  return `jotted-status-active-${type}`\n}\n\nexport function pluginClass (name) {\n  return `jotted-plugin-${name}`\n}\n\nexport function frameContent (style = '', body = '', script = '') {\n  return `\n    <!doctype html>\n    <html>\n      <head>\n        <style>${style}</style>\n      </head>\n      <body>\n        ${body}\n\n        <script>\n          (function () {\n            window.addEventListener('DOMContentLoaded', function () {\n              window.parent.postMessage(JSON.stringify({\n                type: 'jotted-dom-ready'\n              }), '*')\n            })\n          }())\n        </script>\n        <script>${script}</script>\n      </body>\n    </html>\n  `\n}\n\nexport function statusLoading (url) {\n  return `Loading <strong>${url}</strong>..`\n}\n\nexport function statusFetchError (url) {\n  return `There was an error loading <strong>${url}</strong>.`\n}\n","/* util\n */\n\nfunction extend (obj = {}, defaults = {}) {\n  var extended = {}\n  // clone object\n  Object.keys(obj).forEach(function (key) {\n    extended[key] = obj[key]\n  })\n\n  // copy default keys where undefined\n  Object.keys(defaults).forEach(function (key) {\n    if (typeof extended[key] !== 'undefined') {\n      extended[key] = obj[key]\n    } else {\n      extended[key] = defaults[key]\n    }\n  })\n\n  return extended\n}\n\nfunction fetch (url, callback) {\n  var xhr = new window.XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'text'\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      callback(null, xhr.responseText)\n    } else {\n      callback(url, xhr)\n    }\n  }\n\n  xhr.onerror = function (err) {\n    callback(err)\n  }\n\n  xhr.send()\n}\n\nfunction runCallback (index, params, arr, errors, callback) {\n  return function (err, res) {\n    if (err) {\n      errors.push(err)\n    }\n\n    index++\n    if (index === arr.length) {\n      callback(errors, res)\n    } else {\n      seqRunner(index, res, arr, errors, callback)\n    }\n  }\n}\n\nfunction seqRunner (index, params, arr, errors, callback) {\n  // async\n  arr[index](params, runCallback.apply(this, arguments))\n}\n\nfunction seq (arr, params, callback = function () {}) {\n  var errors = []\n\n  if (!arr.length) {\n    return callback(errors, params)\n  }\n\n  seqRunner(0, params, arr, errors, callback)\n}\n\nfunction debounce (fn, delay) {\n  var cooldown = null\n  var multiple = null\n  return function () {\n    if (cooldown) {\n      multiple = true\n    } else {\n      fn.apply(this, arguments)\n    }\n\n    clearTimeout(cooldown)\n\n    cooldown = setTimeout(() => {\n      if (multiple) {\n        fn.apply(this, arguments)\n      }\n\n      cooldown = null\n      multiple = null\n    }, delay)\n  }\n}\n\nfunction log () {\n  console.log(arguments)\n}\n\nfunction hasClass (node, className) {\n  if (!node.className) {\n    return false\n  }\n  var tempClass = ' ' + node.className + ' '\n  className = ' ' + className + ' '\n\n  if (tempClass.indexOf(className) !== -1) {\n    return true\n  }\n\n  return false\n}\n\nfunction addClass (node, className) {\n  // class is already added\n  if (hasClass(node, className)) {\n    return node.className\n  }\n\n  if (node.className) {\n    className = ' ' + className\n  }\n\n  node.className += className\n\n  return node.className\n}\n\nfunction removeClass (node, className) {\n  var spaceBefore = ' ' + className\n  var spaceAfter = className + ' '\n\n  if (node.className.indexOf(spaceBefore) !== -1) {\n    node.className = node.className.replace(spaceBefore, '')\n  } else if (node.className.indexOf(spaceAfter) !== -1) {\n    node.className = node.className.replace(spaceAfter, '')\n  } else {\n    node.className = node.className.replace(className, '')\n  }\n\n  return node.className\n}\n\nfunction data (node, attr) {\n  return node.getAttribute('data-' + attr)\n}\n\n// mode detection based on content type and file extension\nvar defaultModemap = {\n  'html': 'html',\n  'css': 'css',\n  'js': 'javascript',\n  'less': 'less',\n  'styl': 'stylus',\n  'coffee': 'coffeescript'\n}\n\nfunction getMode (type = '', file = '', customModemap = {}) {\n  var modemap = extend(customModemap, defaultModemap)\n\n  // try the file extension\n  for (let key in modemap) {\n    let keyLength = key.length\n    if (file.slice(-keyLength++) === '.' + key) {\n      return modemap[key]\n    }\n  }\n\n  // try the file type (html/css/js)\n  for (let key in modemap) {\n    if (type === key) {\n      return modemap[key]\n    }\n  }\n\n  return type\n}\n\nexport {\n  extend,\n  fetch,\n  seq,\n  debounce,\n  log,\n  getMode,\n\n  data,\n  hasClass,\n  addClass,\n  removeClass\n}\n","/* plugin\n */\n\nimport * as util from './util.js'\nimport * as template from './template.js'\n\nvar plugins = []\n\nfunction find (id) {\n  for (let pluginIndex in plugins) {\n    let plugin = plugins[pluginIndex]\n    if (plugin._id === id) {\n      return plugin\n    }\n  }\n\n  // can't find plugin\n  throw new Error(`Plugin ${id} is not registered.`)\n}\n\nfunction register (id, plugin) {\n  // private properties\n  plugin._id = id\n  plugins.push(plugin)\n}\n\n// create a new instance of each plugin, on the jotted instance\nfunction init () {\n  this._get('options').plugins.forEach((plugin) => {\n    // check if plugin definition is string or object\n    let Plugin\n    let pluginName\n    let pluginOptions = {}\n    if (typeof plugin === 'string') {\n      pluginName = plugin\n    } else if (typeof plugin === 'object') {\n      pluginName = plugin.name\n      pluginOptions = plugin.options || {}\n    }\n\n    Plugin = find(pluginName)\n    this._get('plugins')[plugin] = new Plugin(this, pluginOptions)\n\n    util.addClass(this._get('$container'), template.pluginClass(pluginName))\n  })\n}\n\nexport {\n  register,\n  init\n}\n","/* pubsoup\n */\n\nimport * as util from './util.js'\n\nexport default class PubSoup {\n  constructor () {\n    this.topics = {}\n    this.callbacks = {}\n  }\n\n  find (query) {\n    this.topics[query] = this.topics[query] || []\n    return this.topics[query]\n  }\n\n  subscribe (topic, subscriber, priority = 90) {\n    var foundTopic = this.find(topic)\n    subscriber._priority = priority\n    foundTopic.push(subscriber)\n\n    // sort subscribers on priority\n    foundTopic.sort(function (a, b) {\n      return (a._priority > b._priority) ? 1 : ((b._priority > a._priority) ? -1 : 0)\n    })\n  }\n\n  // removes a function from an array\n  remover (arr, fn) {\n    arr.forEach(function () {\n      // if no fn is specified\n      // clean-up the array\n      if (!fn) {\n        arr.length = 0\n        return\n      }\n\n      // find the fn in the arr\n      var index = [].indexOf.call(arr, fn)\n\n      // we didn't find it in the array\n      if (index === -1) {\n        return\n      }\n\n      arr.splice(index, 1)\n    })\n  }\n\n  unsubscribe (topic, subscriber) {\n    // remove from subscribers\n    var foundTopic = this.find(topic)\n    this.remover(foundTopic, subscriber)\n\n    // remove from callbacks\n    this.callbacks[topic] = this.callbacks[topic] || []\n    this.remover(this.callbacks[topic], subscriber)\n  }\n\n  // sequentially runs a method on all plugins\n  publish (topic, params = {}) {\n    var foundTopic = this.find(topic)\n    var runList = []\n\n    foundTopic.forEach(function (subscriber) {\n      runList.push(subscriber)\n    })\n\n    util.seq(runList, params, this.runCallbacks(topic))\n  }\n\n  // parallel run all .done callbacks\n  runCallbacks (topic) {\n    var pub = this\n    return function () {\n      pub.callbacks[topic] = pub.callbacks[topic] || []\n\n      pub.callbacks[topic].forEach((c) => {\n        c.apply(this, arguments)\n      })\n    }\n  }\n\n  // attach a callback when a publish[topic] is done\n  done (topic, callback = function () {}) {\n    this.callbacks[topic] = this.callbacks[topic] || []\n    this.callbacks[topic].push(callback)\n  }\n}\n","/* play plugin\n * adds a Run button\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginPlay {\n  constructor (jotted, options) {\n    options = util.extend(options, {})\n\n    // cached code\n    var cache = {}\n    // latest version of the code.\n    // replaces the cache when the run button is pressed.\n    var code = {}\n\n    // run button\n    var $button = document.createElement('button')\n    $button.className = 'jotted-button jotted-button-play'\n    $button.innerHTML = 'Run'\n\n    jotted.$container.appendChild($button)\n    $button.addEventListener('click', this.run.bind(this))\n\n    // capture the code on each change\n    jotted.on('change', this.change.bind(this))\n\n    // public\n    this.cache = cache\n    this.code = code\n    this.jotted = jotted\n  }\n\n  change (params, callback) {\n    // always cache the latest code\n    this.code[params.type] = util.extend(params)\n\n    // replace the params with the latest cache\n    if (this.cache[params.type]) {\n      callback(null, this.cache[params.type])\n    } else {\n      // cache the first run\n      this.cache[params.type] = util.extend(params)\n\n      callback(null, params)\n    }\n  }\n\n  run () {\n    // trigger change on each type with the latest code\n    for (let type in this.code) {\n      // update the cache with the latest code\n      this.cache[type] = util.extend(this.code[type])\n\n      // trigger the change\n      this.jotted.trigger('change', this.cache[type])\n    }\n  }\n}\n","/* console plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginConsole {\n  constructor (jotted, options) {\n    options = util.extend(options, {})\n\n    var priority = 30\n    var history = []\n    var historyIndex = 0\n\n    var $iframe = jotted.$container.querySelector('.jotted-pane-result iframe')\n\n    // new tab and pane markup\n    var $nav = document.createElement('li')\n    util.addClass($nav, 'jotted-nav-item jotted-nav-item-console')\n    $nav.innerHTML = '<a href=\"#\" data-jotted-type=\"console\">JS Console</a>'\n\n    var $pane = document.createElement('div')\n    util.addClass($pane, 'jotted-pane jotted-pane-console')\n\n    $pane.innerHTML = `\n      <div class=\"jotted-console-container\">\n        <ul class=\"jotted-console-output\"></ul>\n        <form class=\"jotted-console-input\">\n          <input type=\"text\">\n        </form>\n      </div>\n      <button class=\"jotted-button jotted-console-clear\">Clear</button>\n    `\n\n    jotted.$container.appendChild($pane)\n    jotted.$container.querySelector('.jotted-nav').appendChild($nav)\n\n    var $container = jotted.$container.querySelector('.jotted-console-container')\n    var $output = jotted.$container.querySelector('.jotted-console-output')\n    var $input = jotted.$container.querySelector('.jotted-console-input input')\n    var $inputForm = jotted.$container.querySelector('.jotted-console-input')\n    var $clear = jotted.$container.querySelector('.jotted-console-clear')\n\n    // submit the input form\n    $inputForm.addEventListener('submit', this.submit.bind(this))\n\n    // console history\n    $input.addEventListener('keydown', this.history.bind(this))\n\n    // clear button\n    $clear.addEventListener('click', this.clear.bind(this))\n\n    // capture the console on each change\n    jotted.on('change', this.change.bind(this), priority)\n\n    // get log events from the iframe\n    window.addEventListener('message', this.getMessage.bind(this))\n\n    // plugin public properties\n    this.$container = $container\n    this.$input = $input\n    this.$output = $output\n    this.$iframe = $iframe\n    this.history = history\n    this.historyIndex = historyIndex\n  }\n\n  getMessage (e) {\n    // only catch messages from the iframe\n    if (e.source !== this.$iframe.contentWindow) {\n      return\n    }\n\n    var data = JSON.parse(e.data)\n    if (data.type === 'jotted-console-log') {\n      this.log(data.message)\n    }\n  }\n\n  change (params, callback) {\n    // only parse js content\n    if (params.type !== 'js') {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      return callback(null, params)\n    }\n\n    params.content = `(${this.capture.toString()})();\\n${params.content}`\n\n    callback(null, params)\n  }\n\n  // capture the console.log output\n  capture () {\n    // IE9 with devtools closed\n    if (typeof window.console === 'undefined' || typeof window.console.log === 'undefined') {\n      window.console = {\n        log: function () {}\n      }\n    }\n\n    // for IE9 support\n    var oldConsoleLog = Function.prototype.bind.call(window.console.log, window.console)\n\n    window.console.log = function () {\n      // send log messages to the parent window\n      [].slice.call(arguments).forEach(function (message) {\n        window.parent.postMessage(JSON.stringify({\n          type: 'jotted-console-log',\n          message: message\n        }), '*')\n      })\n\n      // in IE9, console.log is object instead of function\n      // https://connect.microsoft.com/IE/feedback/details/585896/console-log-typeof-is-object-instead-of-function\n      oldConsoleLog.apply(oldConsoleLog, arguments)\n    }\n  }\n\n  log (message = '', type) {\n    var $log = document.createElement('li')\n    util.addClass($log, 'jotted-console-log')\n\n    if (typeof type !== 'undefined') {\n      util.addClass($log, `jotted-console-log-${type}`)\n    }\n\n    $log.innerHTML = message\n\n    this.$output.appendChild($log)\n  }\n\n  submit (e) {\n    var inputValue = this.$input.value.trim()\n\n    // if input is blank, do nothing\n    if (inputValue === '') {\n      return e.preventDefault()\n    }\n\n    // add run to history\n    this.history.push(inputValue)\n    this.historyIndex = this.history.length\n\n    // log input value\n    this.log(inputValue, 'history')\n\n    // add return if it doesn't start with it\n    if (inputValue.indexOf('return') !== 0) {\n      inputValue = 'return ' + inputValue\n    }\n\n    // show output or errors\n    try {\n      // run the console input in the iframe context\n      var scriptOutput = this.$iframe.contentWindow.eval(`(function() {${inputValue}})()`)\n\n      this.log(scriptOutput)\n    } catch (err) {\n      this.log(err, 'error')\n    }\n\n    // clear the console value\n    this.$input.value = ''\n\n    // scroll console pane to bottom\n    // to keep the input into view\n    this.$container.scrollTop = this.$container.scrollHeight\n\n    e.preventDefault()\n  }\n\n  clear () {\n    this.$output.innerHTML = ''\n  }\n\n  history (e) {\n    var UP = 38\n    var DOWN = 40\n    var gotHistory = false\n    var selectionStart = this.$input.selectionStart\n\n    // only if we have previous history\n    // and the cursor is at the start\n    if (e.keyCode === UP && this.historyIndex !== 0 && selectionStart === 0) {\n      this.historyIndex--\n      gotHistory = true\n    }\n\n    // only if we have future history\n    // and the cursor is at the end\n    if (e.keyCode === DOWN && this.historyIndex !== this.history.length - 1 && selectionStart === this.$input.value.length) {\n      this.historyIndex++\n      gotHistory = true\n    }\n\n    // only if history changed\n    if (gotHistory) {\n      this.$input.value = this.history[this.historyIndex]\n    }\n  }\n}\n","/* markdown plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginMarkdown {\n  constructor (jotted, options) {\n    var priority = 20\n\n    this.options = util.extend(options, {})\n\n    // check if marked is loaded\n    if (typeof window.marked === 'undefined') {\n      return\n    }\n\n    window.marked.setOptions(options)\n\n    // change html link label\n    jotted.$container.querySelector('a[data-jotted-type=\"html\"]').innerHTML = 'Markdown'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  change (params, callback) {\n    // only parse html content\n    if (params.type === 'html') {\n      try {\n        params.content = window.marked(params.content)\n      } catch (err) {\n        return callback(err, params)\n      }\n\n      callback(null, params)\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* babel plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginBabel {\n  constructor (jotted, options) {\n    var priority = 20\n\n    this.options = util.extend(options, {})\n\n    // check if babel is loaded\n    if (typeof window.Babel !== 'undefined') {\n      // using babel-standalone\n      this.babel = window.Babel\n    } else if (typeof window.babel !== 'undefined') {\n      // using browser.js from babel-core 5.x\n      this.babel = {\n        transform: window.babel\n      }\n    } else {\n      return\n    }\n\n    // change js link label\n    jotted.$container.querySelector('a[data-jotted-type=\"js\"]').innerHTML = 'ES2015'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  change (params, callback) {\n    // only parse js content\n    if (params.type === 'js') {\n      try {\n        params.content = this.babel.transform(params.content, this.options).code\n      } catch (err) {\n        return callback(err, params)\n      }\n\n      callback(null, params)\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* stylus plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginStylus {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if stylus is loaded\n    if (typeof window.stylus === 'undefined') {\n      return\n    }\n\n    // change CSS link label to Stylus\n    jotted.$container.querySelector('a[data-jotted-type=\"css\"]').innerHTML = 'Stylus'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isStylus (params) {\n    if (params.type !== 'css') {\n      return false\n    }\n\n    return (params.file.indexOf('.styl') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .styl and blank files\n    if (this.isStylus(params)) {\n      window.stylus(params.content, this.options).render((err, res) => {\n        if (err) {\n          return callback(err, params)\n        } else {\n          // replace the content with the parsed less\n          params.content = res\n        }\n\n        callback(null, params)\n      })\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* coffeescript plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginCoffeeScript {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if coffeescript is loaded\n    if (typeof window.CoffeeScript === 'undefined') {\n      return\n    }\n\n    // change JS link label to Less\n    jotted.$container.querySelector('a[data-jotted-type=\"js\"]').innerHTML = 'CoffeeScript'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isCoffee (params) {\n    if (params.type !== 'js') {\n      return false\n    }\n\n    return (params.file.indexOf('.coffee') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .less and blank files\n    if (this.isCoffee(params)) {\n      try {\n        params.content = window.CoffeeScript.compile(params.content)\n      } catch (err) {\n        return callback(err, params)\n      }\n    }\n\n    callback(null, params)\n  }\n}\n","/* less plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginLess {\n  constructor (jotted, options) {\n    var priority = 20\n\n    options = util.extend(options, {})\n\n    // check if less is loaded\n    if (typeof window.less === 'undefined') {\n      return\n    }\n\n    // change CSS link label to Less\n    jotted.$container.querySelector('a[data-jotted-type=\"css\"]').innerHTML = 'Less'\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  isLess (params) {\n    if (params.type !== 'css') {\n      return false\n    }\n\n    return (params.file.indexOf('.less') !== -1 || params.file === '')\n  }\n\n  change (params, callback) {\n    // only parse .less and blank files\n    if (this.isLess(params)) {\n      window.less.render(params.content, this.options, (err, res) => {\n        if (err) {\n          return callback(err, params)\n        } else {\n          // replace the content with the parsed less\n          params.content = res.css\n        }\n\n        callback(null, params)\n      })\n    } else {\n      // make sure we callback either way,\n      // to not break the pubsoup\n      callback(null, params)\n    }\n  }\n}\n","/* coremirror plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginCodeMirror {\n  constructor (jotted, options) {\n    var priority = 1\n    var i\n\n    this.editor = {}\n    this.jotted = jotted\n\n    // custom modemap for codemirror\n    var modemap = {\n      'html': 'htmlmixed'\n    }\n\n    options = util.extend(options, {\n      lineNumbers: true\n    })\n\n    // check if CodeMirror is loaded\n    if (typeof window.CodeMirror === 'undefined') {\n      return\n    }\n\n    var $editors = jotted.$container.querySelectorAll('.jotted-editor')\n\n    for (i = 0; i < $editors.length; i++) {\n      let $textarea = $editors[i].querySelector('textarea')\n      let type = util.data($textarea, 'jotted-type')\n      let file = util.data($textarea, 'jotted-file')\n\n      this.editor[type] = window.CodeMirror.fromTextArea($textarea, options)\n      this.editor[type].setOption('mode', util.getMode(type, file, modemap))\n    }\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  editorChange (params) {\n    return () => {\n      // trigger a change event\n      this.jotted.trigger('change', params)\n    }\n  }\n\n  change (params, callback) {\n    var editor = this.editor[params.type]\n\n    // if the event is not started by the codemirror change.\n    // triggered only once per editor,\n    // when the textarea is populated/file is loaded.\n    if (!params.cmEditor) {\n      editor.setValue(params.content)\n\n      // attach the event only after the file is loaded\n      params.cmEditor = editor\n      editor.on('change', this.editorChange(params))\n    }\n\n    // manipulate the params and pass them on\n    params.content = editor.getValue()\n    callback(null, params)\n  }\n}\n","/* ace plugin\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginAce {\n  constructor (jotted, options) {\n    var priority = 1\n    var i\n\n    this.editor = {}\n    this.jotted = jotted\n\n    options = util.extend(options, {})\n\n    // check if Ace is loaded\n    if (typeof window.ace === 'undefined') {\n      return\n    }\n\n    var $editors = jotted.$container.querySelectorAll('.jotted-editor')\n\n    for (i = 0; i < $editors.length; i++) {\n      let $textarea = $editors[i].querySelector('textarea')\n      let type = util.data($textarea, 'jotted-type')\n      let file = util.data($textarea, 'jotted-file')\n\n      let $aceContainer = document.createElement('div')\n      $editors[i].appendChild($aceContainer)\n\n      this.editor[type] = window.ace.edit($aceContainer)\n      let editor = this.editor[type]\n\n      let editorOptions = util.extend(options)\n\n      editor.getSession().setMode('ace/mode/' + util.getMode(type, file))\n      editor.getSession().setOptions(editorOptions)\n\n      editor.$blockScrolling = Infinity\n    }\n\n    jotted.on('change', this.change.bind(this), priority)\n  }\n\n  editorChange (params) {\n    return () => {\n      this.jotted.trigger('change', params)\n    }\n  }\n\n  change (params, callback) {\n    var editor = this.editor[params.type]\n\n    // if the event is not started by the ace change.\n    // triggered only once per editor,\n    // when the textarea is populated/file is loaded.\n    if (!params.aceEditor) {\n      editor.getSession().setValue(params.content)\n\n      // attach the event only after the file is loaded\n      params.aceEditor = editor\n      editor.on('change', this.editorChange(params))\n    }\n\n    // manipulate the params and pass them on\n    params.content = editor.getValue()\n    callback(null, params)\n  }\n}\n","/* scriptless plugin\n * removes script tags from html content\n */\n\nimport * as util from '../util.js'\n\nexport default class PluginScriptless {\n  constructor (jotted, options) {\n    options = util.extend(options, {})\n\n    // https://html.spec.whatwg.org/multipage/scripting.html\n    var runScriptTypes = [\n      'application/javascript',\n      'application/ecmascript',\n      'application/x-ecmascript',\n      'application/x-javascript',\n      'text/ecmascript',\n      'text/javascript',\n      'text/javascript1.0',\n      'text/javascript1.1',\n      'text/javascript1.2',\n      'text/javascript1.3',\n      'text/javascript1.4',\n      'text/javascript1.5',\n      'text/jscript',\n      'text/livescript',\n      'text/x-ecmascript',\n      'text/x-javascript'\n    ]\n\n    // remove script tags on each change\n    jotted.on('change', this.change.bind(this))\n\n    // public\n    this.runScriptTypes = runScriptTypes\n  }\n\n  change (params, callback) {\n    if (params.type !== 'html') {\n      return callback(null, params)\n    }\n\n    // for IE9 support, remove the script tags from HTML content.\n    // when we stop supporting IE9, we can use the sandbox attribute.\n    var fragment = document.createElement('div')\n    fragment.innerHTML = params.content\n\n    var typeAttr = null\n\n    // remove all script tags\n    var $scripts = fragment.querySelectorAll('script')\n    for (let i = 0; i < $scripts.length; i++) {\n      typeAttr = $scripts[i].getAttribute('type')\n\n      // only remove script tags without the type attribute\n      // or with a javascript mime attribute value.\n      // the ones that are run by the browser.\n      if (!typeAttr || this.runScriptTypes.indexOf(typeAttr) !== -1) {\n        $scripts[i].parentNode.removeChild($scripts[i])\n      }\n    }\n\n    params.content = fragment.innerHTML\n\n    callback(null, params)\n  }\n}\n","/* render plugin\n * renders the iframe\n */\n\nimport * as util from '../util.js'\nimport * as template from '../template.js'\n\nexport default class PluginRender {\n  constructor (jotted, options) {\n    options = util.extend(options, {})\n\n    // iframe srcdoc support\n    var supportSrcdoc = !!('srcdoc' in document.createElement('iframe'))\n    var $resultFrame = jotted.$container.querySelector('.jotted-pane-result iframe')\n\n    var frameContent = ''\n    var latestCallback = function () {}\n\n    // cached content\n    var content = {\n      html: '',\n      css: '',\n      js: ''\n    }\n\n    // catch domready events from the iframe\n    window.addEventListener('message', this.domready.bind(this))\n\n    // render on each change\n    jotted.on('change', this.change.bind(this), 100)\n\n    // public\n    this.supportSrcdoc = supportSrcdoc\n    this.latestCallback = latestCallback\n    this.content = content\n    this.frameContent = frameContent\n    this.$resultFrame = $resultFrame\n  }\n\n  change (params, callback) {\n    // cache manipulated content\n    this.content[params.type] = params.content\n\n    // check existing and to-be-rendered content\n    var oldFrameContent = this.frameContent\n    this.frameContent = template.frameContent(this.content['css'], this.content['html'], this.content['js'])\n\n    // don't render if previous and new frame content are the same.\n    // mostly for the `play` plugin,\n    // so we don't re-render the same content on each change.\n    if (this.frameContent === oldFrameContent) {\n      callback(null, params)\n      return\n    }\n\n    // cache the current callback as a global,\n    // so we can call it from the message callback.\n    this.latestCallback = function () {\n      callback(null, params)\n    }\n\n    this.$resultFrame.setAttribute('srcdoc', this.frameContent)\n\n    // older browsers without iframe srcset support (IE9)\n    if (!this.supportSrcdoc) {\n      // tips from https://github.com/jugglinmike/srcdoc-polyfill\n      // Copyright (c) 2012 Mike Pennisi\n      // Licensed under the MIT license.\n      var jsUrl = 'javascript:window.frameElement.getAttribute(\"srcdoc\");'\n\n      this.$resultFrame.setAttribute('src', jsUrl)\n\n      // Explicitly set the iFrame's window.location for\n      // compatibility with IE9, which does not react to changes in\n      // the `src` attribute when it is a `javascript:` URL.\n      if (this.$resultFrame.contentWindow) {\n        this.$resultFrame.contentWindow.location = jsUrl\n      }\n    }\n  }\n\n  domready (e) {\n    // only catch messages from the iframe\n    if (e.source !== this.$resultFrame.contentWindow) {\n      return\n    }\n\n    var data = JSON.parse(e.data)\n    if (data.type === 'jotted-dom-ready') {\n      this.latestCallback()\n    }\n  }\n}\n","/* bundle plugins\n */\n\n// register bundled plugins\nimport PluginRender from './plugins/render.js'\nimport PluginScriptless from './plugins/scriptless.js'\n\nimport PluginAce from './plugins/ace.js'\nimport PluginCodeMirror from './plugins/codemirror.js'\nimport PluginLess from './plugins/less.js'\nimport PluginCoffeeScript from './plugins/coffeescript.js'\nimport PluginStylus from './plugins/stylus.js'\nimport PluginBabel from './plugins/babel.js'\nimport PluginMarkdown from './plugins/markdown.js'\nimport PluginConsole from './plugins/console.js'\nimport PluginPlay from './plugins/play.js'\n\nexport default function BundlePlugins (jotted) {\n  jotted.plugin('render', PluginRender)\n  jotted.plugin('scriptless', PluginScriptless)\n\n  jotted.plugin('ace', PluginAce)\n  jotted.plugin('codemirror', PluginCodeMirror)\n  jotted.plugin('less', PluginLess)\n  jotted.plugin('coffeescript', PluginCoffeeScript)\n  jotted.plugin('stylus', PluginStylus)\n  jotted.plugin('babel', PluginBabel)\n  jotted.plugin('markdown', PluginMarkdown)\n  jotted.plugin('console', PluginConsole)\n  jotted.plugin('play', PluginPlay)\n}\n","/* jotted\n */\n\nimport * as util from './util.js'\nimport * as template from './template.js'\nimport * as plugin from './plugin.js'\nimport PubSoup from './pubsoup.js'\n\nclass Jotted {\n  constructor ($jottedContainer, opts) {\n    if (!$jottedContainer) {\n      throw new Error('Can\\'t find Jotted container.')\n    }\n\n    // private data\n    var _private = {}\n    this._get = function (key) {\n      return _private[key]\n    }\n    this._set = function (key, value) {\n      _private[key] = value\n      return _private[key]\n    }\n\n    // options\n    var options = this._set('options', util.extend(opts, {\n      files: [],\n      showBlank: false,\n      runScripts: true,\n      pane: 'result',\n      debounce: 250,\n      plugins: []\n    }))\n\n    // the render plugin is mandatory\n    options.plugins.push('render')\n\n    // use the scriptless plugin if runScripts is false\n    if (options.runScripts === false) {\n      options.plugins.push('scriptless')\n    }\n\n    // PubSoup\n    var pubsoup = this._set('pubsoup', new PubSoup())\n\n    this._set('trigger', this.trigger())\n    this._set('on', function () {\n      pubsoup.subscribe.apply(pubsoup, arguments)\n    })\n    this._set('off', function () {\n      pubsoup.unsubscribe.apply(pubsoup, arguments)\n    })\n    var done = this._set('done', function () {\n      pubsoup.done.apply(pubsoup, arguments)\n    })\n\n    // after all plugins run\n    // show errors\n    done('change', this.errors.bind(this))\n\n    // DOM\n    var $container = this._set('$container', $jottedContainer)\n    $container.innerHTML = template.container()\n    util.addClass($container, template.containerClass())\n\n    // default pane\n    var paneActive = this._set('paneActive', options.pane)\n    util.addClass($container, template.paneActiveClass(paneActive))\n\n    // status nodes\n    this._set('$status', {})\n\n    for (let type of [ 'html', 'css', 'js' ]) {\n      this.markup(type)\n    }\n\n    // textarea change events.\n    $container.addEventListener('keyup', util.debounce(this.change.bind(this), options.debounce))\n    $container.addEventListener('change', util.debounce(this.change.bind(this), options.debounce))\n\n    // pane change\n    $container.addEventListener('click', this.pane.bind(this))\n\n    // expose public properties\n    this.$container = this._get('$container')\n    this.on = this._get('on')\n    this.off = this._get('off')\n    this.done = this._get('done')\n    this.trigger = this._get('trigger')\n    this.paneActive = this._get('paneActive')\n\n    // init plugins\n    this._set('plugins', {})\n    plugin.init.call(this)\n\n    // load files\n    for (let type of [ 'html', 'css', 'js' ]) {\n      this.load(type)\n    }\n\n    // show all tabs, even if empty\n    if (options.showBlank) {\n      for (let type of [ 'html', 'css', 'js' ]) {\n        util.addClass($container, template.hasFileClass(type))\n      }\n    }\n  }\n\n  findFile (type) {\n    var file = {}\n    var options = this._get('options')\n\n    for (let fileIndex in options.files) {\n      let file = options.files[fileIndex]\n      if (file.type === type) {\n        return file\n      }\n    }\n\n    return file\n  }\n\n  markup (type) {\n    var $container = this._get('$container')\n    var $parent = $container.querySelector(`.jotted-pane-${type}`)\n    // create the markup for an editor\n    var file = this.findFile(type)\n\n    var $editor = document.createElement('div')\n    $editor.innerHTML = template.editorContent(type, file.url)\n    $editor.className = template.editorClass(type)\n\n    $parent.appendChild($editor)\n\n    // get the status node\n    this._get('$status')[type] = $parent.querySelector('.jotted-status')\n\n    // if we have a file for the current type\n    if (typeof file.url !== 'undefined' || typeof file.content !== 'undefined') {\n      // add the has-type class to the container\n      util.addClass($container, template.hasFileClass(type))\n    }\n  }\n\n  load (type) {\n    // create the markup for an editor\n    var file = this.findFile(type)\n    var $textarea = this._get('$container').querySelector(`.jotted-pane-${type} textarea`)\n\n    // file as string\n    if (typeof file.content !== 'undefined') {\n      this.setValue($textarea, file.content)\n    } else if (typeof file.url !== 'undefined') {\n      // show loading message\n      this.status('loading', [ template.statusLoading(file.url) ], {\n        type: type,\n        file: file\n      })\n\n      // file as url\n      util.fetch(file.url, (err, res) => {\n        if (err) {\n          // show load errors\n          this.status('error', [ template.statusFetchError(err) ], {\n            type: type\n          })\n\n          return\n        }\n\n        // clear the loading status\n        this.clearStatus('loading', {\n          type: type\n        })\n\n        this.setValue($textarea, res)\n      })\n    } else {\n      // trigger a change event on blank editors,\n      // for editor plugins to catch.\n      // (eg. the codemirror and ace plugins attach the change event\n      // only after the initial change/load event)\n      this.setValue($textarea, '')\n    }\n  }\n\n  setValue ($textarea, val) {\n    $textarea.value = val\n\n    // trigger change event, for initial render\n    this.change({\n      target: $textarea\n    })\n  }\n\n  change (e) {\n    if (!util.data(e.target, 'jotted-type')) {\n      return\n    }\n\n    // trigger the change event\n    this.trigger('change', {\n      type: util.data(e.target, 'jotted-type'),\n      file: util.data(e.target, 'jotted-file'),\n      content: e.target.value\n    })\n  }\n\n  errors (errs, params) {\n    this.status('error', errs, params)\n  }\n\n  pane (e) {\n    if (!util.data(e.target, 'jotted-type')) {\n      return\n    }\n\n    var $container = this._get('$container')\n    var paneActive = this._get('paneActive')\n    util.removeClass($container, template.paneActiveClass(paneActive))\n\n    paneActive = this._set('paneActive', util.data(e.target, 'jotted-type'))\n    util.addClass($container, template.paneActiveClass(paneActive))\n\n    e.preventDefault()\n  }\n\n  status (statusType = 'error', messages = [], params = {}) {\n    if (!messages.length) {\n      return this.clearStatus(statusType, params)\n    }\n\n    var $status = this._get('$status')\n\n    // add error/loading class to status\n    util.addClass($status[params.type], template.statusClass(statusType))\n\n    util.addClass(this._get('$container'), template.statusActiveClass(params.type))\n\n    var markup = ''\n    messages.forEach(function (err) {\n      markup += template.statusMessage(err)\n    })\n\n    $status[params.type].innerHTML = markup\n  }\n\n  clearStatus (statusType, params) {\n    var $status = this._get('$status')\n\n    util.removeClass($status[params.type], template.statusClass(statusType))\n    util.removeClass(this._get('$container'), template.statusActiveClass(params.type))\n    $status[params.type].innerHTML = ''\n  }\n\n  // debounced trigger method\n  // custom debouncer to use a different timer per type\n  trigger () {\n    var options = this._get('options')\n    var pubsoup = this._get('pubsoup')\n    // cooldown timer\n    var cooldown = {}\n    // multiple calls\n    var multiple = {}\n\n    return function (topic, { type = 'default' } = {}) {\n      if (cooldown[type]) {\n        // if we had multiple calls before the cooldown\n        multiple[type] = true\n      } else {\n        // trigger immediately once cooldown is over\n        pubsoup.publish.apply(pubsoup, arguments)\n      }\n\n      clearTimeout(cooldown[type])\n\n      // set cooldown timer\n      cooldown[type] = setTimeout(() => {\n        // if we had multiple calls before the cooldown,\n        // trigger the function again at the end.\n        if (multiple[type]) {\n          pubsoup.publish.apply(pubsoup, arguments)\n        }\n\n        multiple[type] = null\n        cooldown[type] = null\n      }, options.debounce)\n    }\n  }\n}\n\n// register plugins\nJotted.plugin = function () {\n  return plugin.register.apply(this, arguments)\n}\n\n// register bundled plugins\nimport BundlePlugins from './bundle-plugins.js'\nBundlePlugins(Jotted)\n\nexport default Jotted\n"],"names":["util.addClass","template.pluginClass","util.seq","util.extend","util.data","util.getMode","template.frameContent","template.container","template.containerClass","template.paneActiveClass","util.debounce","plugin.init","template.hasFileClass","template.editorContent","template.editorClass","template.statusLoading","util.fetch","template.statusFetchError","util.removeClass","template.statusClass","template.statusActiveClass","template.statusMessage","plugin.register"],"mappings":"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"}