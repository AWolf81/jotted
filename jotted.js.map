{"version":3,"file":null,"sources":["D:/github/jotted_fork/src/util.js","D:/github/jotted_fork/src/template.js","D:/github/jotted_fork/src/plugin.js","D:/github/jotted_fork/src/pubsoup.js","D:/github/jotted_fork/src/plugins/render.js","D:/github/jotted_fork/src/plugins/scriptless.js","D:/github/jotted_fork/src/plugins/ace.js","D:/github/jotted_fork/src/plugins/codemirror.js","D:/github/jotted_fork/src/plugins/less.js","D:/github/jotted_fork/src/plugins/coffeescript.js","D:/github/jotted_fork/src/plugins/stylus.js","D:/github/jotted_fork/src/plugins/babel.js","D:/github/jotted_fork/src/plugins/markdown.js","D:/github/jotted_fork/src/plugins/console.js","D:/github/jotted_fork/src/plugins/play.js","D:/github/jotted_fork/src/bundle-plugins.js","D:/github/jotted_fork/src/core.js"],"sourcesContent":["/* util\r\n */\r\n\r\nfunction extend (obj = {}, defaults = {}) {\r\n  var extended = {}\r\n  // clone object\r\n  Object.keys(obj).forEach(function (key) {\r\n    extended[key] = obj[key]\r\n  })\r\n\r\n  // copy default keys where undefined\r\n  Object.keys(defaults).forEach(function (key) {\r\n    if (typeof extended[key] !== 'undefined') {\r\n      extended[key] = obj[key]\r\n    } else {\r\n      extended[key] = defaults[key]\r\n    }\r\n  })\r\n\r\n  return extended\r\n}\r\n\r\nfunction fetch (url, callback) {\r\n  var xhr = new window.XMLHttpRequest()\r\n  xhr.open('GET', url)\r\n  xhr.responseType = 'text'\r\n\r\n  xhr.onload = function () {\r\n    if (xhr.status === 200) {\r\n      callback(null, xhr.responseText)\r\n    } else {\r\n      callback(url, xhr)\r\n    }\r\n  }\r\n\r\n  xhr.onerror = function (err) {\r\n    callback(err)\r\n  }\r\n\r\n  xhr.send()\r\n}\r\n\r\nfunction runCallback (index, params, arr, errors, callback) {\r\n  return function (err, res) {\r\n    if (err) {\r\n      errors.push(err)\r\n    }\r\n\r\n    index++\r\n    if (index === arr.length) {\r\n      callback(errors, res)\r\n    } else {\r\n      seqRunner(index, res, arr, errors, callback)\r\n    }\r\n  }\r\n}\r\n\r\nfunction seqRunner (index, params, arr, errors, callback) {\r\n  // async\r\n  arr[index](params, runCallback.apply(this, arguments))\r\n}\r\n\r\nfunction seq (arr, params, callback = function () {}) {\r\n  var errors = []\r\n\r\n  if (!arr.length) {\r\n    return callback(errors, params)\r\n  }\r\n\r\n  seqRunner(0, params, arr, errors, callback)\r\n}\r\n\r\nfunction debounce (fn, delay) {\r\n  var cooldown = null\r\n  var multiple = null\r\n  return function () {\r\n    if (cooldown) {\r\n      multiple = true\r\n    } else {\r\n      fn.apply(this, arguments)\r\n    }\r\n\r\n    clearTimeout(cooldown)\r\n\r\n    cooldown = setTimeout(() => {\r\n      if (multiple) {\r\n        fn.apply(this, arguments)\r\n      }\r\n\r\n      cooldown = null\r\n      multiple = null\r\n    }, delay)\r\n  }\r\n}\r\n\r\nfunction log () {\r\n  console.log(arguments)\r\n}\r\n\r\nfunction hasClass (node, className) {\r\n  if (!node.className) {\r\n    return false\r\n  }\r\n  var tempClass = ' ' + node.className + ' '\r\n  className = ' ' + className + ' '\r\n\r\n  if (tempClass.indexOf(className) !== -1) {\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction addClass (node, className) {\r\n  // class is already added\r\n  if (hasClass(node, className)) {\r\n    return node.className\r\n  }\r\n\r\n  if (node.className) {\r\n    className = ' ' + className\r\n  }\r\n\r\n  node.className += className\r\n\r\n  return node.className\r\n}\r\n\r\nfunction removeClass (node, className) {\r\n  var spaceBefore = ' ' + className\r\n  var spaceAfter = className + ' '\r\n\r\n  if (node.className.indexOf(spaceBefore) !== -1) {\r\n    node.className = node.className.replace(spaceBefore, '')\r\n  } else if (node.className.indexOf(spaceAfter) !== -1) {\r\n    node.className = node.className.replace(spaceAfter, '')\r\n  } else {\r\n    node.className = node.className.replace(className, '')\r\n  }\r\n\r\n  return node.className\r\n}\r\n\r\nfunction data (node, attr) {\r\n  return node.getAttribute('data-' + attr)\r\n}\r\n\r\n// mode detection based on content type and file extension\r\nvar defaultModemap = {\r\n  'html': 'html',\r\n  'css': 'css',\r\n  'js': 'javascript',\r\n  'less': 'less',\r\n  'styl': 'stylus',\r\n  'coffee': 'coffeescript'\r\n}\r\n\r\nfunction getMode (type = '', file = '', customModemap = {}) {\r\n  var modemap = extend(customModemap, defaultModemap)\r\n\r\n  // try the file extension\r\n  for (let key in modemap) {\r\n    let keyLength = key.length\r\n    if (file.slice(-keyLength++) === '.' + key) {\r\n      return modemap[key]\r\n    }\r\n  }\r\n\r\n  // try the file type (html/css/js)\r\n  for (let key in modemap) {\r\n    if (type === key) {\r\n      return modemap[key]\r\n    }\r\n  }\r\n\r\n  return type\r\n}\r\n\r\nexport {\r\n  extend,\r\n  fetch,\r\n  seq,\r\n  debounce,\r\n  log,\r\n  getMode,\r\n\r\n  data,\r\n  hasClass,\r\n  addClass,\r\n  removeClass\r\n}\r\n","/* template\r\n */\r\n\r\nexport function container () {\r\n  return `\r\n    <ul class=\"jotted-nav\">\r\n      <li class=\"jotted-nav-item jotted-nav-item-result\">\r\n        <a href=\"#\" data-jotted-type=\"result\">\r\n          Result\r\n        </a>\r\n      </li>\r\n      <li class=\"jotted-nav-item jotted-nav-item-html\">\r\n        <a href=\"#\" data-jotted-type=\"html\">\r\n          HTML\r\n        </a>\r\n      </li>\r\n      <li class=\"jotted-nav-item jotted-nav-item-css\">\r\n        <a href=\"#\" data-jotted-type=\"css\">\r\n          CSS\r\n        </a>\r\n      </li>\r\n      <li class=\"jotted-nav-item jotted-nav-item-js\">\r\n        <a href=\"#\" data-jotted-type=\"js\">\r\n          JavaScript\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <div class=\"jotted-pane jotted-pane-result\"><iframe></iframe></div>\r\n    <div class=\"jotted-pane jotted-pane-html\"></div>\r\n    <div class=\"jotted-pane jotted-pane-css\"></div>\r\n    <div class=\"jotted-pane jotted-pane-js\"></div>\r\n  `\r\n}\r\n\r\nexport function paneActiveClass (type) {\r\n  return `jotted-pane-active-${type}`\r\n}\r\n\r\nexport function containerClass () {\r\n  return `jotted`\r\n}\r\n\r\nexport function hasFileClass (type) {\r\n  return `jotted-has-${type}`\r\n}\r\n\r\nexport function editorClass (type) {\r\n  return `jotted-editor jotted-editor-${type}`\r\n}\r\n\r\nexport function editorContent (type, fileUrl = '') {\r\n  return `\r\n    <textarea data-jotted-type=\"${type}\" data-jotted-file=\"${fileUrl}\"></textarea>\r\n    <div class=\"jotted-status\"></div>\r\n  `\r\n}\r\n\r\nexport function statusMessage (err) {\r\n  return `\r\n    <p>${err}</p>\r\n  `\r\n}\r\n\r\nexport function statusClass (type) {\r\n  return `jotted-status-${type}`\r\n}\r\n\r\nexport function statusActiveClass (type) {\r\n  return `jotted-status-active-${type}`\r\n}\r\n\r\nexport function pluginClass (name) {\r\n  return `jotted-plugin-${name}`\r\n}\r\n\r\nexport function statusLoading (url) {\r\n  return `Loading <strong>${url}</strong>..`\r\n}\r\n\r\nexport function statusFetchError (url) {\r\n  return `There was an error loading <strong>${url}</strong>.`\r\n}\r\n","/* plugin\r\n */\r\n\r\nimport * as util from './util.js'\r\nimport * as template from './template.js'\r\n\r\nvar plugins = []\r\n\r\nfunction find (id) {\r\n  for (let pluginIndex in plugins) {\r\n    let plugin = plugins[pluginIndex]\r\n    if (plugin._id === id) {\r\n      return plugin\r\n    }\r\n  }\r\n\r\n  // can't find plugin\r\n  throw new Error(`Plugin ${id} is not registered.`)\r\n}\r\n\r\nfunction register (id, plugin) {\r\n  // private properties\r\n  plugin._id = id\r\n  plugins.push(plugin)\r\n}\r\n\r\n// create a new instance of each plugin, on the jotted instance\r\nfunction init () {\r\n  this._get('options').plugins.forEach((plugin) => {\r\n    // check if plugin definition is string or object\r\n    let Plugin\r\n    let pluginName\r\n    let pluginOptions = {}\r\n    if (typeof plugin === 'string') {\r\n      pluginName = plugin\r\n    } else if (typeof plugin === 'object') {\r\n      pluginName = plugin.name\r\n      pluginOptions = plugin.options || {}\r\n    }\r\n\r\n    Plugin = find(pluginName)\r\n    this._get('plugins')[plugin] = new Plugin(this, pluginOptions)\r\n\r\n    util.addClass(this._get('$container'), template.pluginClass(pluginName))\r\n  })\r\n}\r\n\r\nexport {\r\n  register,\r\n  init\r\n}\r\n","/* pubsoup\r\n */\r\n\r\nimport * as util from './util.js'\r\n\r\nexport default class PubSoup {\r\n  constructor () {\r\n    this.topics = {}\r\n    this.callbacks = {}\r\n  }\r\n\r\n  find (query) {\r\n    this.topics[query] = this.topics[query] || []\r\n    return this.topics[query]\r\n  }\r\n\r\n  subscribe (topic, subscriber, priority = 90) {\r\n    var foundTopic = this.find(topic)\r\n    subscriber._priority = priority\r\n    foundTopic.push(subscriber)\r\n\r\n    // sort subscribers on priority\r\n    foundTopic.sort(function (a, b) {\r\n      return (a._priority > b._priority) ? 1 : ((b._priority > a._priority) ? -1 : 0)\r\n    })\r\n  }\r\n\r\n  // removes a function from an array\r\n  remover (arr, fn) {\r\n    arr.forEach(function () {\r\n      // if no fn is specified\r\n      // clean-up the array\r\n      if (!fn) {\r\n        arr.length = 0\r\n        return\r\n      }\r\n\r\n      // find the fn in the arr\r\n      var index = [].indexOf.call(arr, fn)\r\n\r\n      // we didn't find it in the array\r\n      if (index === -1) {\r\n        return\r\n      }\r\n\r\n      arr.splice(index, 1)\r\n    })\r\n  }\r\n\r\n  unsubscribe (topic, subscriber) {\r\n    // remove from subscribers\r\n    var foundTopic = this.find(topic)\r\n    this.remover(foundTopic, subscriber)\r\n\r\n    // remove from callbacks\r\n    this.callbacks[topic] = this.callbacks[topic] || []\r\n    this.remover(this.callbacks[topic], subscriber)\r\n  }\r\n\r\n  // sequentially runs a method on all plugins\r\n  publish (topic, params = {}) {\r\n    var foundTopic = this.find(topic)\r\n    var runList = []\r\n\r\n    foundTopic.forEach(function (subscriber) {\r\n      runList.push(subscriber)\r\n    })\r\n\r\n    util.seq(runList, params, this.runCallbacks(topic))\r\n  }\r\n\r\n  // parallel run all .done callbacks\r\n  runCallbacks (topic) {\r\n    var pub = this\r\n    return function () {\r\n      pub.callbacks[topic] = pub.callbacks[topic] || []\r\n\r\n      pub.callbacks[topic].forEach((c) => {\r\n        c.apply(this, arguments)\r\n      })\r\n    }\r\n  }\r\n\r\n  // attach a callback when a publish[topic] is done\r\n  done (topic, callback = function () {}) {\r\n    this.callbacks[topic] = this.callbacks[topic] || []\r\n    this.callbacks[topic].push(callback)\r\n  }\r\n}\r\n","/* render plugin\r\n * renders the iframe\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginRender {\r\n  constructor (jotted, options) {\r\n    options = util.extend(options, {})\r\n\r\n    // iframe srcdoc support\r\n    var supportSrcdoc = !!('srcdoc' in document.createElement('iframe'))\r\n    var $resultFrame = jotted.$container.querySelector('.jotted-pane-result iframe')\r\n\r\n    var frameContent = ''\r\n    var latestCallback = function () {}\r\n\r\n    // cached content\r\n    var content = {\r\n      html: '',\r\n      css: '',\r\n      js: ''\r\n    }\r\n\r\n    // catch domready events from the iframe\r\n    window.addEventListener('message', this.domready.bind(this))\r\n\r\n    // render on each change\r\n    jotted.on('change', this.change.bind(this), 100)\r\n\r\n    // public\r\n    this.supportSrcdoc = supportSrcdoc\r\n    this.latestCallback = latestCallback\r\n    this.content = content\r\n    this.frameContent = frameContent\r\n    this.$resultFrame = $resultFrame\r\n  }\r\n\r\n  template (style = '', body = '', script = '') {\r\n    return `\r\n      <!doctype html>\r\n      <html>\r\n        <head>\r\n          <script>\r\n            (function () {\r\n              window.addEventListener('DOMContentLoaded', function () {\r\n                window.parent.postMessage(JSON.stringify({\r\n                  type: 'jotted-dom-ready'\r\n                }), '*')\r\n              })\r\n            }())\r\n          </script>\r\n\r\n          <style>${style}</style>\r\n        </head>\r\n        <body>\r\n          ${body}\r\n\r\n          <!--\r\n            Jotted:\r\n            Empty script tag prevents malformed HTML from breaking the next script.\r\n          -->\r\n          <script></script>\r\n          <script>${script}</script>\r\n        </body>\r\n      </html>\r\n    `\r\n  }\r\n\r\n  change (params, callback) {\r\n    // cache manipulated content\r\n    this.content[params.type] = params.content\r\n\r\n    // check existing and to-be-rendered content\r\n    var oldFrameContent = this.frameContent\r\n    this.frameContent = this.template(this.content['css'], this.content['html'], this.content['js'])\r\n\r\n    // don't render if previous and new frame content are the same.\r\n    // mostly for the `play` plugin,\r\n    // so we don't re-render the same content on each change.\r\n    // unless we set forceRender.\r\n    if (params.forceRender !== true && this.frameContent === oldFrameContent) {\r\n      callback(null, params)\r\n      return\r\n    }\r\n\r\n    // cache the current callback as a global,\r\n    // so we can call it from the message callback.\r\n    this.latestCallback = function () {\r\n      callback(null, params)\r\n    }\r\n\r\n    this.$resultFrame.setAttribute('srcdoc', this.frameContent)\r\n\r\n    // older browsers without iframe srcset support (IE9)\r\n    if (!this.supportSrcdoc) {\r\n      // tips from https://github.com/jugglinmike/srcdoc-polyfill\r\n      // Copyright (c) 2012 Mike Pennisi\r\n      // Licensed under the MIT license.\r\n      var jsUrl = 'javascript:window.frameElement.getAttribute(\"srcdoc\");'\r\n\r\n      this.$resultFrame.setAttribute('src', jsUrl)\r\n\r\n      // Explicitly set the iFrame's window.location for\r\n      // compatibility with IE9, which does not react to changes in\r\n      // the `src` attribute when it is a `javascript:` URL.\r\n      if (this.$resultFrame.contentWindow) {\r\n        this.$resultFrame.contentWindow.location = jsUrl\r\n      }\r\n    }\r\n  }\r\n\r\n  domready (e) {\r\n    // only catch messages from the iframe\r\n    if (e.source !== this.$resultFrame.contentWindow) {\r\n      return\r\n    }\r\n\r\n    var data = JSON.parse(e.data)\r\n    if (data.type === 'jotted-dom-ready') {\r\n      this.latestCallback()\r\n    }\r\n  }\r\n}\r\n","/* scriptless plugin\r\n * removes script tags from html content\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginScriptless {\r\n  constructor (jotted, options) {\r\n    options = util.extend(options, {})\r\n\r\n    // https://html.spec.whatwg.org/multipage/scripting.html\r\n    var runScriptTypes = [\r\n      'application/javascript',\r\n      'application/ecmascript',\r\n      'application/x-ecmascript',\r\n      'application/x-javascript',\r\n      'text/ecmascript',\r\n      'text/javascript',\r\n      'text/javascript1.0',\r\n      'text/javascript1.1',\r\n      'text/javascript1.2',\r\n      'text/javascript1.3',\r\n      'text/javascript1.4',\r\n      'text/javascript1.5',\r\n      'text/jscript',\r\n      'text/livescript',\r\n      'text/x-ecmascript',\r\n      'text/x-javascript'\r\n    ]\r\n\r\n    // remove script tags on each change\r\n    jotted.on('change', this.change.bind(this))\r\n\r\n    // public\r\n    this.runScriptTypes = runScriptTypes\r\n  }\r\n\r\n  change (params, callback) {\r\n    if (params.type !== 'html') {\r\n      return callback(null, params)\r\n    }\r\n\r\n    // for IE9 support, remove the script tags from HTML content.\r\n    // when we stop supporting IE9, we can use the sandbox attribute.\r\n    var fragment = document.createElement('div')\r\n    fragment.innerHTML = params.content\r\n\r\n    var typeAttr = null\r\n\r\n    // remove all script tags\r\n    var $scripts = fragment.querySelectorAll('script')\r\n    for (let i = 0; i < $scripts.length; i++) {\r\n      typeAttr = $scripts[i].getAttribute('type')\r\n\r\n      // only remove script tags without the type attribute\r\n      // or with a javascript mime attribute value.\r\n      // the ones that are run by the browser.\r\n      if (!typeAttr || this.runScriptTypes.indexOf(typeAttr) !== -1) {\r\n        $scripts[i].parentNode.removeChild($scripts[i])\r\n      }\r\n    }\r\n\r\n    params.content = fragment.innerHTML\r\n\r\n    callback(null, params)\r\n  }\r\n}\r\n","/* ace plugin\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginAce {\r\n  constructor (jotted, options) {\r\n    var priority = 1\r\n    var i\r\n\r\n    this.editor = {}\r\n    this.jotted = jotted\r\n\r\n    options = util.extend(options, {})\r\n\r\n    // check if Ace is loaded\r\n    if (typeof window.ace === 'undefined') {\r\n      return\r\n    }\r\n\r\n    var $editors = jotted.$container.querySelectorAll('.jotted-editor')\r\n\r\n    for (i = 0; i < $editors.length; i++) {\r\n      let $textarea = $editors[i].querySelector('textarea')\r\n      let type = util.data($textarea, 'jotted-type')\r\n      let file = util.data($textarea, 'jotted-file')\r\n\r\n      let $aceContainer = document.createElement('div')\r\n      $editors[i].appendChild($aceContainer)\r\n\r\n      this.editor[type] = window.ace.edit($aceContainer)\r\n      let editor = this.editor[type]\r\n\r\n      let editorOptions = util.extend(options)\r\n\r\n      editor.getSession().setMode('ace/mode/' + util.getMode(type, file))\r\n      editor.getSession().setOptions(editorOptions)\r\n\r\n      editor.$blockScrolling = Infinity\r\n    }\r\n\r\n    jotted.on('change', this.change.bind(this), priority)\r\n  }\r\n\r\n  editorChange (params) {\r\n    return () => {\r\n      this.jotted.trigger('change', params)\r\n    }\r\n  }\r\n\r\n  change (params, callback) {\r\n    var editor = this.editor[params.type]\r\n\r\n    // if the event is not started by the ace change.\r\n    // triggered only once per editor,\r\n    // when the textarea is populated/file is loaded.\r\n    if (!params.aceEditor) {\r\n      editor.getSession().setValue(params.content)\r\n\r\n      // attach the event only after the file is loaded\r\n      params.aceEditor = editor\r\n      editor.on('change', this.editorChange(params))\r\n    }\r\n\r\n    // manipulate the params and pass them on\r\n    params.content = editor.getValue()\r\n    callback(null, params)\r\n  }\r\n}\r\n","/* coremirror plugin\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginCodeMirror {\r\n  constructor (jotted, options) {\r\n    var priority = 1\r\n    var i\r\n\r\n    this.editor = {}\r\n    this.jotted = jotted\r\n\r\n    // custom modemap for codemirror\r\n    var modemap = {\r\n      'html': 'htmlmixed'\r\n    }\r\n\r\n    options = util.extend(options, {\r\n      lineNumbers: true\r\n    })\r\n\r\n    // check if CodeMirror is loaded\r\n    if (typeof window.CodeMirror === 'undefined') {\r\n      return\r\n    }\r\n\r\n    var $editors = jotted.$container.querySelectorAll('.jotted-editor')\r\n\r\n    for (i = 0; i < $editors.length; i++) {\r\n      let $textarea = $editors[i].querySelector('textarea')\r\n      let type = util.data($textarea, 'jotted-type')\r\n      let file = util.data($textarea, 'jotted-file')\r\n\r\n      this.editor[type] = window.CodeMirror.fromTextArea($textarea, options)\r\n      this.editor[type].setOption('mode', util.getMode(type, file, modemap))\r\n    }\r\n\r\n    jotted.on('change', this.change.bind(this), priority)\r\n  }\r\n\r\n  editorChange (params) {\r\n    return () => {\r\n      // trigger a change event\r\n      this.jotted.trigger('change', params)\r\n    }\r\n  }\r\n\r\n  change (params, callback) {\r\n    var editor = this.editor[params.type]\r\n\r\n    // if the event is not started by the codemirror change.\r\n    // triggered only once per editor,\r\n    // when the textarea is populated/file is loaded.\r\n    if (!params.cmEditor) {\r\n      editor.setValue(params.content)\r\n\r\n      // attach the event only after the file is loaded\r\n      params.cmEditor = editor\r\n      editor.on('change', this.editorChange(params))\r\n    }\r\n\r\n    // manipulate the params and pass them on\r\n    params.content = editor.getValue()\r\n    callback(null, params)\r\n  }\r\n}\r\n","/* less plugin\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginLess {\r\n  constructor (jotted, options) {\r\n    var priority = 20\r\n\r\n    options = util.extend(options, {})\r\n\r\n    // check if less is loaded\r\n    if (typeof window.less === 'undefined') {\r\n      return\r\n    }\r\n\r\n    // change CSS link label to Less\r\n    jotted.$container.querySelector('a[data-jotted-type=\"css\"]').innerHTML = 'Less'\r\n\r\n    jotted.on('change', this.change.bind(this), priority)\r\n  }\r\n\r\n  isLess (params) {\r\n    if (params.type !== 'css') {\r\n      return false\r\n    }\r\n\r\n    return (params.file.indexOf('.less') !== -1 || params.file === '')\r\n  }\r\n\r\n  change (params, callback) {\r\n    // only parse .less and blank files\r\n    if (this.isLess(params)) {\r\n      window.less.render(params.content, this.options, (err, res) => {\r\n        if (err) {\r\n          return callback(err, params)\r\n        } else {\r\n          // replace the content with the parsed less\r\n          params.content = res.css\r\n        }\r\n\r\n        callback(null, params)\r\n      })\r\n    } else {\r\n      // make sure we callback either way,\r\n      // to not break the pubsoup\r\n      callback(null, params)\r\n    }\r\n  }\r\n}\r\n","/* coffeescript plugin\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginCoffeeScript {\r\n  constructor (jotted, options) {\r\n    var priority = 20\r\n\r\n    options = util.extend(options, {})\r\n\r\n    // check if coffeescript is loaded\r\n    if (typeof window.CoffeeScript === 'undefined') {\r\n      return\r\n    }\r\n\r\n    // change JS link label to Less\r\n    jotted.$container.querySelector('a[data-jotted-type=\"js\"]').innerHTML = 'CoffeeScript'\r\n\r\n    jotted.on('change', this.change.bind(this), priority)\r\n  }\r\n\r\n  isCoffee (params) {\r\n    if (params.type !== 'js') {\r\n      return false\r\n    }\r\n\r\n    return (params.file.indexOf('.coffee') !== -1 || params.file === '')\r\n  }\r\n\r\n  change (params, callback) {\r\n    // only parse .less and blank files\r\n    if (this.isCoffee(params)) {\r\n      try {\r\n        params.content = window.CoffeeScript.compile(params.content)\r\n      } catch (err) {\r\n        return callback(err, params)\r\n      }\r\n    }\r\n\r\n    callback(null, params)\r\n  }\r\n}\r\n","/* stylus plugin\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginStylus {\r\n  constructor (jotted, options) {\r\n    var priority = 20\r\n\r\n    options = util.extend(options, {})\r\n\r\n    // check if stylus is loaded\r\n    if (typeof window.stylus === 'undefined') {\r\n      return\r\n    }\r\n\r\n    // change CSS link label to Stylus\r\n    jotted.$container.querySelector('a[data-jotted-type=\"css\"]').innerHTML = 'Stylus'\r\n\r\n    jotted.on('change', this.change.bind(this), priority)\r\n  }\r\n\r\n  isStylus (params) {\r\n    if (params.type !== 'css') {\r\n      return false\r\n    }\r\n\r\n    return (params.file.indexOf('.styl') !== -1 || params.file === '')\r\n  }\r\n\r\n  change (params, callback) {\r\n    // only parse .styl and blank files\r\n    if (this.isStylus(params)) {\r\n      window.stylus(params.content, this.options).render((err, res) => {\r\n        if (err) {\r\n          return callback(err, params)\r\n        } else {\r\n          // replace the content with the parsed less\r\n          params.content = res\r\n        }\r\n\r\n        callback(null, params)\r\n      })\r\n    } else {\r\n      // make sure we callback either way,\r\n      // to not break the pubsoup\r\n      callback(null, params)\r\n    }\r\n  }\r\n}\r\n","/* babel plugin\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginBabel {\r\n  constructor (jotted, options) {\r\n    var priority = 20\r\n\r\n    this.options = util.extend(options, {})\r\n\r\n    // check if babel is loaded\r\n    if (typeof window.Babel !== 'undefined') {\r\n      // using babel-standalone\r\n      this.babel = window.Babel\r\n    } else if (typeof window.babel !== 'undefined') {\r\n      // using browser.js from babel-core 5.x\r\n      this.babel = {\r\n        transform: window.babel\r\n      }\r\n    } else {\r\n      return\r\n    }\r\n\r\n    // change js link label\r\n    jotted.$container.querySelector('a[data-jotted-type=\"js\"]').innerHTML = 'ES2015'\r\n\r\n    jotted.on('change', this.change.bind(this), priority)\r\n  }\r\n\r\n  change (params, callback) {\r\n    // only parse js content\r\n    if (params.type === 'js') {\r\n      try {\r\n        params.content = this.babel.transform(params.content, this.options).code\r\n      } catch (err) {\r\n        return callback(err, params)\r\n      }\r\n\r\n      callback(null, params)\r\n    } else {\r\n      // make sure we callback either way,\r\n      // to not break the pubsoup\r\n      callback(null, params)\r\n    }\r\n  }\r\n}\r\n","/* markdown plugin\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginMarkdown {\r\n  constructor (jotted, options) {\r\n    var priority = 20\r\n\r\n    this.options = util.extend(options, {})\r\n\r\n    // check if marked is loaded\r\n    if (typeof window.marked === 'undefined') {\r\n      return\r\n    }\r\n\r\n    window.marked.setOptions(options)\r\n\r\n    // change html link label\r\n    jotted.$container.querySelector('a[data-jotted-type=\"html\"]').innerHTML = 'Markdown'\r\n\r\n    jotted.on('change', this.change.bind(this), priority)\r\n  }\r\n\r\n  change (params, callback) {\r\n    // only parse html content\r\n    if (params.type === 'html') {\r\n      try {\r\n        params.content = window.marked(params.content)\r\n      } catch (err) {\r\n        return callback(err, params)\r\n      }\r\n\r\n      callback(null, params)\r\n    } else {\r\n      // make sure we callback either way,\r\n      // to not break the pubsoup\r\n      callback(null, params)\r\n    }\r\n  }\r\n}\r\n","/* console plugin\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginConsole {\r\n  constructor (jotted, options) {\r\n    options = util.extend(options, {\r\n      autoClear: false\r\n    })\r\n\r\n    var priority = 30\r\n    var history = []\r\n    var historyIndex = 0\r\n    var logCaptureSnippet = `(${this.capture.toString()})();`\r\n    var contentCache = {\r\n      html: '',\r\n      css: '',\r\n      js: ''\r\n    }\r\n\r\n    var $iframe = jotted.$container.querySelector('.jotted-pane-result iframe')\r\n\r\n    // new tab and pane markup\r\n    var $nav = document.createElement('li')\r\n    util.addClass($nav, 'jotted-nav-item jotted-nav-item-console')\r\n    $nav.innerHTML = '<a href=\"#\" data-jotted-type=\"console\">JS Console</a>'\r\n\r\n    var $pane = document.createElement('div')\r\n    util.addClass($pane, 'jotted-pane jotted-pane-console')\r\n\r\n    $pane.innerHTML = `\r\n      <div class=\"jotted-console-container\">\r\n        <ul class=\"jotted-console-output\"></ul>\r\n        <form class=\"jotted-console-input\">\r\n          <input type=\"text\">\r\n        </form>\r\n      </div>\r\n      <button class=\"jotted-button jotted-console-clear\">Clear</button>\r\n    `\r\n\r\n    jotted.$container.appendChild($pane)\r\n    jotted.$container.querySelector('.jotted-nav').appendChild($nav)\r\n\r\n    var $container = jotted.$container.querySelector('.jotted-console-container')\r\n    var $output = jotted.$container.querySelector('.jotted-console-output')\r\n    var $input = jotted.$container.querySelector('.jotted-console-input input')\r\n    var $inputForm = jotted.$container.querySelector('.jotted-console-input')\r\n    var $clear = jotted.$container.querySelector('.jotted-console-clear')\r\n\r\n    // submit the input form\r\n    $inputForm.addEventListener('submit', this.submit.bind(this))\r\n\r\n    // console history\r\n    $input.addEventListener('keydown', this.history.bind(this))\r\n\r\n    // clear button\r\n    $clear.addEventListener('click', this.clear.bind(this))\r\n\r\n    // clear the console on each change\r\n    if (options.autoClear === true) {\r\n      jotted.on('change', this.autoClear.bind(this), priority - 1)\r\n    }\r\n\r\n    // capture the console on each change\r\n    jotted.on('change', this.change.bind(this), priority)\r\n\r\n    // get log events from the iframe\r\n    window.addEventListener('message', this.getMessage.bind(this))\r\n\r\n    // plugin public properties\r\n    this.$container = $container\r\n    this.$input = $input\r\n    this.$output = $output\r\n    this.$iframe = $iframe\r\n    this.history = history\r\n    this.historyIndex = historyIndex\r\n    this.logCaptureSnippet = logCaptureSnippet\r\n    this.contentCache = contentCache\r\n  }\r\n\r\n  getMessage (e) {\r\n    // only catch messages from the iframe\r\n    if (e.source !== this.$iframe.contentWindow) {\r\n      return\r\n    }\r\n\r\n    var data = JSON.parse(e.data)\r\n    if (data.type === 'jotted-console-log') {\r\n      this.log(data.message)\r\n    }\r\n  }\r\n\r\n  autoClear (params, callback) {\r\n    var snippetlessContent = params.content\r\n\r\n    // remove the snippet from cached js content\r\n    if (params.type === 'js') {\r\n      snippetlessContent = snippetlessContent.replace(this.logCaptureSnippet, '')\r\n    }\r\n\r\n    // for compatibility with the Play plugin,\r\n    // clear the console only if something has changed or force rendering.\r\n    if (params.forceRender === true || this.contentCache[params.type] !== snippetlessContent) {\r\n      this.clear()\r\n    }\r\n\r\n    // always cache the latest content\r\n    this.contentCache[params.type] = snippetlessContent\r\n\r\n    callback(null, params)\r\n  }\r\n\r\n  change (params, callback) {\r\n    // only parse js content\r\n    if (params.type !== 'js') {\r\n      // make sure we callback either way,\r\n      // to not break the pubsoup\r\n      return callback(null, params)\r\n    }\r\n\r\n    // check if the snippet is already added.\r\n    // the Play plugin caches the changed params and triggers change\r\n    // with the cached response, causing the snippet to be inserted\r\n    // multiple times, on each trigger.\r\n    if (params.content.indexOf(this.logCaptureSnippet) === -1) {\r\n      params.content = `${this.logCaptureSnippet}${params.content}`\r\n    }\r\n\r\n    callback(null, params)\r\n  }\r\n\r\n  // capture the console.log output\r\n  capture () {\r\n    // IE9 with devtools closed\r\n    if (typeof window.console === 'undefined' || typeof window.console.log === 'undefined') {\r\n      window.console = {\r\n        log: function () {}\r\n      }\r\n    }\r\n\r\n    // for IE9 support\r\n    var oldConsoleLog = Function.prototype.bind.call(window.console.log, window.console)\r\n\r\n    window.console.log = function () {\r\n      // send log messages to the parent window\r\n      [].slice.call(arguments).forEach(function (message) {\r\n        window.parent.postMessage(JSON.stringify({\r\n          type: 'jotted-console-log',\r\n          message: message\r\n        }), '*')\r\n      })\r\n\r\n      // in IE9, console.log is object instead of function\r\n      // https://connect.microsoft.com/IE/feedback/details/585896/console-log-typeof-is-object-instead-of-function\r\n      oldConsoleLog.apply(oldConsoleLog, arguments)\r\n    }\r\n  }\r\n\r\n  log (message = '', type) {\r\n    var $log = document.createElement('li')\r\n    util.addClass($log, 'jotted-console-log')\r\n\r\n    if (typeof type !== 'undefined') {\r\n      util.addClass($log, `jotted-console-log-${type}`)\r\n    }\r\n\r\n    $log.innerHTML = message\r\n\r\n    this.$output.appendChild($log)\r\n  }\r\n\r\n  submit (e) {\r\n    var inputValue = this.$input.value.trim()\r\n\r\n    // if input is blank, do nothing\r\n    if (inputValue === '') {\r\n      return e.preventDefault()\r\n    }\r\n\r\n    // add run to history\r\n    this.history.push(inputValue)\r\n    this.historyIndex = this.history.length\r\n\r\n    // log input value\r\n    this.log(inputValue, 'history')\r\n\r\n    // add return if it doesn't start with it\r\n    if (inputValue.indexOf('return') !== 0) {\r\n      inputValue = 'return ' + inputValue\r\n    }\r\n\r\n    // show output or errors\r\n    try {\r\n      // run the console input in the iframe context\r\n      var scriptOutput = this.$iframe.contentWindow.eval(`(function() {${inputValue}})()`)\r\n\r\n      this.log(scriptOutput)\r\n    } catch (err) {\r\n      this.log(err, 'error')\r\n    }\r\n\r\n    // clear the console value\r\n    this.$input.value = ''\r\n\r\n    // scroll console pane to bottom\r\n    // to keep the input into view\r\n    this.$container.scrollTop = this.$container.scrollHeight\r\n\r\n    e.preventDefault()\r\n  }\r\n\r\n  clear () {\r\n    this.$output.innerHTML = ''\r\n  }\r\n\r\n  history (e) {\r\n    var UP = 38\r\n    var DOWN = 40\r\n    var gotHistory = false\r\n    var selectionStart = this.$input.selectionStart\r\n\r\n    // only if we have previous history\r\n    // and the cursor is at the start\r\n    if (e.keyCode === UP && this.historyIndex !== 0 && selectionStart === 0) {\r\n      this.historyIndex--\r\n      gotHistory = true\r\n    }\r\n\r\n    // only if we have future history\r\n    // and the cursor is at the end\r\n    if (e.keyCode === DOWN && this.historyIndex !== this.history.length - 1 && selectionStart === this.$input.value.length) {\r\n      this.historyIndex++\r\n      gotHistory = true\r\n    }\r\n\r\n    // only if history changed\r\n    if (gotHistory) {\r\n      this.$input.value = this.history[this.historyIndex]\r\n    }\r\n  }\r\n}\r\n","/* play plugin\r\n * adds a Run button\r\n */\r\n\r\nimport * as util from '../util.js'\r\n\r\nexport default class PluginPlay {\r\n  constructor (jotted, options) {\r\n    options = util.extend(options, {\r\n      firstRun: true\r\n    })\r\n\r\n    var priority = 10\r\n    // cached code\r\n    var cache = {}\r\n    // latest version of the code.\r\n    // replaces the cache when the run button is pressed.\r\n    var code = {}\r\n\r\n    // set firstRun=false to start with a blank preview.\r\n    // run the real content only after the first Run button press.\r\n    if (options.firstRun === false) {\r\n      cache = {\r\n        html: {\r\n          type: 'html',\r\n          content: ''\r\n        },\r\n        css: {\r\n          type: 'css',\r\n          content: ''\r\n        },\r\n        js: {\r\n          type: 'js',\r\n          content: ''\r\n        }\r\n      }\r\n    }\r\n\r\n    // run button\r\n    var $button = document.createElement('button')\r\n    $button.className = 'jotted-button jotted-button-play'\r\n    $button.innerHTML = 'Run'\r\n\r\n    jotted.$container.appendChild($button)\r\n    $button.addEventListener('click', this.run.bind(this))\r\n\r\n    // capture the code on each change\r\n    jotted.on('change', this.change.bind(this), priority)\r\n\r\n    // public\r\n    this.cache = cache\r\n    this.code = code\r\n    this.jotted = jotted\r\n  }\r\n\r\n  change (params, callback) {\r\n    // always cache the latest code\r\n    this.code[params.type] = util.extend(params)\r\n\r\n    // replace the params with the latest cache\r\n    if (typeof this.cache[params.type] !== 'undefined') {\r\n      // check if there is a flag to trigger run\r\n      if (this.code[params.type].play &&\r\n         (this.code[params.type].play.forceRun === true)) {\r\n        this.run()\r\n        // clear force to just run once (don't cache)\r\n        this.code[params.type].play.forceRun = null\r\n      }\r\n\r\n      callback(null, this.cache[params.type])\r\n\r\n      // make sure we don't cache forceRender,\r\n      // and send it with each change.\r\n      this.cache[params.type].forceRender = null\r\n    } else {\r\n      // cache the first run\r\n      this.cache[params.type] = util.extend(params)\r\n\r\n      callback(null, params)\r\n    }\r\n  }\r\n\r\n  run () {\r\n    // trigger change on each type with the latest code\r\n    for (let type in this.code) {\r\n      this.cache[type] = util.extend(this.code[type], {\r\n        // force rendering on each Run press\r\n        forceRender: true\r\n      })\r\n\r\n      // trigger the change\r\n      this.jotted.trigger('change', this.cache[type])\r\n    }\r\n  }\r\n}\r\n","/* bundle plugins\r\n */\r\n\r\n// register bundled plugins\r\nimport PluginRender from './plugins/render.js'\r\nimport PluginScriptless from './plugins/scriptless.js'\r\n\r\nimport PluginAce from './plugins/ace.js'\r\nimport PluginCodeMirror from './plugins/codemirror.js'\r\nimport PluginLess from './plugins/less.js'\r\nimport PluginCoffeeScript from './plugins/coffeescript.js'\r\nimport PluginStylus from './plugins/stylus.js'\r\nimport PluginBabel from './plugins/babel.js'\r\nimport PluginMarkdown from './plugins/markdown.js'\r\nimport PluginConsole from './plugins/console.js'\r\nimport PluginPlay from './plugins/play.js'\r\n\r\nexport default function BundlePlugins (jotted) {\r\n  jotted.plugin('render', PluginRender)\r\n  jotted.plugin('scriptless', PluginScriptless)\r\n\r\n  jotted.plugin('ace', PluginAce)\r\n  jotted.plugin('codemirror', PluginCodeMirror)\r\n  jotted.plugin('less', PluginLess)\r\n  jotted.plugin('coffeescript', PluginCoffeeScript)\r\n  jotted.plugin('stylus', PluginStylus)\r\n  jotted.plugin('babel', PluginBabel)\r\n  jotted.plugin('markdown', PluginMarkdown)\r\n  jotted.plugin('console', PluginConsole)\r\n  jotted.plugin('play', PluginPlay)\r\n}\r\n","/* jotted\r\n */\r\n\r\nimport * as util from './util.js'\r\nimport * as template from './template.js'\r\nimport * as plugin from './plugin.js'\r\nimport PubSoup from './pubsoup.js'\r\n\r\nclass Jotted {\r\n  constructor ($jottedContainer, opts) {\r\n    if (!$jottedContainer) {\r\n      throw new Error('Can\\'t find Jotted container.')\r\n    }\r\n\r\n    // private data\r\n    var _private = {}\r\n    this._get = function (key) {\r\n      return _private[key]\r\n    }\r\n    this._set = function (key, value) {\r\n      _private[key] = value\r\n      return _private[key]\r\n    }\r\n\r\n    // options\r\n    var options = this._set('options', util.extend(opts, {\r\n      files: [],\r\n      showBlank: false,\r\n      runScripts: true,\r\n      pane: 'result',\r\n      debounce: 250,\r\n      plugins: []\r\n    }))\r\n\r\n    // the render plugin is mandatory\r\n    options.plugins.push('render')\r\n\r\n    // use the scriptless plugin if runScripts is false\r\n    if (options.runScripts === false) {\r\n      options.plugins.push('scriptless')\r\n    }\r\n\r\n    // cached content for the change method.\r\n    this._set('cachedContent', {\r\n      html: null,\r\n      css: null,\r\n      js: null\r\n    })\r\n\r\n    // PubSoup\r\n    var pubsoup = this._set('pubsoup', new PubSoup())\r\n\r\n    this._set('trigger', this.trigger())\r\n    this._set('on', function () {\r\n      pubsoup.subscribe.apply(pubsoup, arguments)\r\n    })\r\n    this._set('off', function () {\r\n      pubsoup.unsubscribe.apply(pubsoup, arguments)\r\n    })\r\n    var done = this._set('done', function () {\r\n      pubsoup.done.apply(pubsoup, arguments)\r\n    })\r\n\r\n    // after all plugins run\r\n    // show errors\r\n    done('change', this.errors.bind(this))\r\n\r\n    // DOM\r\n    var $container = this._set('$container', $jottedContainer)\r\n    $container.innerHTML = template.container()\r\n    util.addClass($container, template.containerClass())\r\n\r\n    // default pane\r\n    var paneActive = this._set('paneActive', options.pane)\r\n    util.addClass($container, template.paneActiveClass(paneActive))\r\n\r\n    // status nodes\r\n    this._set('$status', {})\r\n\r\n    for (let type of [ 'html', 'css', 'js' ]) {\r\n      this.markup(type)\r\n    }\r\n\r\n    // textarea change events.\r\n    $container.addEventListener('keyup', util.debounce(this.change.bind(this), options.debounce))\r\n    $container.addEventListener('change', util.debounce(this.change.bind(this), options.debounce))\r\n\r\n    // pane change\r\n    $container.addEventListener('click', this.pane.bind(this))\r\n\r\n    // expose public properties\r\n    this.$container = this._get('$container')\r\n    this.on = this._get('on')\r\n    this.off = this._get('off')\r\n    this.done = this._get('done')\r\n    this.trigger = this._get('trigger')\r\n    this.paneActive = this._get('paneActive')\r\n\r\n    // init plugins\r\n    this._set('plugins', {})\r\n    plugin.init.call(this)\r\n\r\n    // load files\r\n    for (let type of [ 'html', 'css', 'js' ]) {\r\n      this.load(type)\r\n    }\r\n\r\n    // show all tabs, even if empty\r\n    if (options.showBlank) {\r\n      for (let type of [ 'html', 'css', 'js' ]) {\r\n        util.addClass($container, template.hasFileClass(type))\r\n      }\r\n    }\r\n  }\r\n\r\n  findFile (type) {\r\n    var file = {}\r\n    var options = this._get('options')\r\n\r\n    for (let fileIndex in options.files) {\r\n      let file = options.files[fileIndex]\r\n      if (file.type === type) {\r\n        return file\r\n      }\r\n    }\r\n\r\n    return file\r\n  }\r\n\r\n  markup (type) {\r\n    var $container = this._get('$container')\r\n    var $parent = $container.querySelector(`.jotted-pane-${type}`)\r\n    // create the markup for an editor\r\n    var file = this.findFile(type)\r\n\r\n    var $editor = document.createElement('div')\r\n    $editor.innerHTML = template.editorContent(type, file.url)\r\n    $editor.className = template.editorClass(type)\r\n\r\n    $parent.appendChild($editor)\r\n\r\n    // get the status node\r\n    this._get('$status')[type] = $parent.querySelector('.jotted-status')\r\n\r\n    // if we have a file for the current type\r\n    if (typeof file.url !== 'undefined' || typeof file.content !== 'undefined') {\r\n      // add the has-type class to the container\r\n      util.addClass($container, template.hasFileClass(type))\r\n    }\r\n  }\r\n\r\n  load (type) {\r\n    // create the markup for an editor\r\n    var file = this.findFile(type)\r\n    var $textarea = this._get('$container').querySelector(`.jotted-pane-${type} textarea`)\r\n\r\n    // file as string\r\n    if (typeof file.content !== 'undefined') {\r\n      this.setValue($textarea, file.content)\r\n    } else if (typeof file.url !== 'undefined') {\r\n      // show loading message\r\n      this.status('loading', [ template.statusLoading(file.url) ], {\r\n        type: type,\r\n        file: file\r\n      })\r\n\r\n      // file as url\r\n      util.fetch(file.url, (err, res) => {\r\n        if (err) {\r\n          // show load errors\r\n          this.status('error', [ template.statusFetchError(err) ], {\r\n            type: type\r\n          })\r\n\r\n          return\r\n        }\r\n\r\n        // clear the loading status\r\n        this.clearStatus('loading', {\r\n          type: type\r\n        })\r\n\r\n        this.setValue($textarea, res)\r\n      })\r\n    } else {\r\n      // trigger a change event on blank editors,\r\n      // for editor plugins to catch.\r\n      // (eg. the codemirror and ace plugins attach the change event\r\n      // only after the initial change/load event)\r\n      this.setValue($textarea, '')\r\n    }\r\n  }\r\n\r\n  setValue ($textarea, val) {\r\n    $textarea.value = val\r\n\r\n    // trigger change event, for initial render\r\n    this.change({\r\n      target: $textarea\r\n    })\r\n  }\r\n\r\n  change (e) {\r\n    var type = util.data(e.target, 'jotted-type')\r\n    if (!type) {\r\n      return\r\n    }\r\n\r\n    // don't trigger change if the content hasn't changed.\r\n    // eg. when blurring the textarea.\r\n    var cachedContent = this._get('cachedContent')\r\n    if (cachedContent[type] === e.target.value) {\r\n      return\r\n    }\r\n\r\n    // cache latest content\r\n    cachedContent[type] = e.target.value\r\n\r\n    // trigger the change event\r\n    this.trigger('change', {\r\n      type: type,\r\n      file: util.data(e.target, 'jotted-file'),\r\n      content: cachedContent[type]\r\n    })\r\n  }\r\n\r\n  errors (errs, params) {\r\n    this.status('error', errs, params)\r\n  }\r\n\r\n  pane (e) {\r\n    if (!util.data(e.target, 'jotted-type')) {\r\n      return\r\n    }\r\n\r\n    var $container = this._get('$container')\r\n    var paneActive = this._get('paneActive')\r\n    util.removeClass($container, template.paneActiveClass(paneActive))\r\n\r\n    paneActive = this._set('paneActive', util.data(e.target, 'jotted-type'))\r\n    util.addClass($container, template.paneActiveClass(paneActive))\r\n\r\n    e.preventDefault()\r\n  }\r\n\r\n  status (statusType = 'error', messages = [], params = {}) {\r\n    if (!messages.length) {\r\n      return this.clearStatus(statusType, params)\r\n    }\r\n\r\n    var $status = this._get('$status')\r\n\r\n    // add error/loading class to status\r\n    util.addClass($status[params.type], template.statusClass(statusType))\r\n\r\n    util.addClass(this._get('$container'), template.statusActiveClass(params.type))\r\n\r\n    var markup = ''\r\n    messages.forEach(function (err) {\r\n      markup += template.statusMessage(err)\r\n    })\r\n\r\n    $status[params.type].innerHTML = markup\r\n  }\r\n\r\n  clearStatus (statusType, params) {\r\n    var $status = this._get('$status')\r\n\r\n    util.removeClass($status[params.type], template.statusClass(statusType))\r\n    util.removeClass(this._get('$container'), template.statusActiveClass(params.type))\r\n    $status[params.type].innerHTML = ''\r\n  }\r\n\r\n  // debounced trigger method\r\n  // custom debouncer to use a different timer per type\r\n  trigger () {\r\n    var options = this._get('options')\r\n    var pubsoup = this._get('pubsoup')\r\n\r\n    // allow disabling the trigger debouncer.\r\n    // mostly for testing: when trigger events happen rapidly\r\n    // multiple events of the same type would be caught once.\r\n    if (options.debounce === false) {\r\n      return function () {\r\n        pubsoup.publish.apply(pubsoup, arguments)\r\n      }\r\n    }\r\n\r\n    // cooldown timer\r\n    var cooldown = {}\r\n    // multiple calls\r\n    var multiple = {}\r\n\r\n    return function (topic, { type = 'default' } = {}) {\r\n      if (cooldown[type]) {\r\n        // if we had multiple calls before the cooldown\r\n        multiple[type] = true\r\n      } else {\r\n        // trigger immediately once cooldown is over\r\n        pubsoup.publish.apply(pubsoup, arguments)\r\n      }\r\n\r\n      clearTimeout(cooldown[type])\r\n\r\n      // set cooldown timer\r\n      cooldown[type] = setTimeout(() => {\r\n        // if we had multiple calls before the cooldown,\r\n        // trigger the function again at the end.\r\n        if (multiple[type]) {\r\n          pubsoup.publish.apply(pubsoup, arguments)\r\n        }\r\n\r\n        multiple[type] = null\r\n        cooldown[type] = null\r\n      }, options.debounce)\r\n    }\r\n  }\r\n}\r\n\r\n// register plugins\r\nJotted.plugin = function () {\r\n  return plugin.register.apply(this, arguments)\r\n}\r\n\r\n// register bundled plugins\r\nimport BundlePlugins from './bundle-plugins.js'\r\nBundlePlugins(Jotted)\r\n\r\nexport default Jotted\r\n"],"names":["template.pluginClass","util.extend","util.data","util.getMode","template.container","template.containerClass","template.paneActiveClass","util.debounce","template.hasFileClass","template.editorContent","template.editorClass","template.statusLoading","template.statusFetchError","template.statusClass","template.statusActiveClass","template.statusMessage","plugin.register"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,EAAA,SAAS,MAAT,GAA0C;AAAA,EAAA,MAAzB,GAAyB,yDAAnB,EAAmB;AAAA,EAAA,MAAf,QAAe,yDAAJ,EAAI;;AACxC,EAAA,MAAI,WAAW,EAAf;;AAEA,EAAA,SAAO,IAAP,CAAY,GAAZ,EAAiB,OAAjB,CAAyB,UAAU,GAAV,EAAe;AACtC,EAAA,aAAS,GAAT,IAAgB,IAAI,GAAJ,CAAhB;AACD,EAAA,GAFD;;;AAKA,EAAA,SAAO,IAAP,CAAY,QAAZ,EAAsB,OAAtB,CAA8B,UAAU,GAAV,EAAe;AAC3C,EAAA,QAAI,OAAO,SAAS,GAAT,CAAP,KAAyB,WAA7B,EAA0C;AACxC,EAAA,eAAS,GAAT,IAAgB,IAAI,GAAJ,CAAhB;AACD,EAAA,KAFD,MAEO;AACL,EAAA,eAAS,GAAT,IAAgB,SAAS,GAAT,CAAhB;AACD,EAAA;AACF,EAAA,GAND;;AAQA,EAAA,SAAO,QAAP;AACD,EAAA;;AAED,EAAA,SAAS,KAAT,CAAgB,GAAhB,EAAqB,QAArB,EAA+B;AAC7B,EAAA,MAAI,MAAM,IAAI,OAAO,cAAX,EAAV;AACA,EAAA,MAAI,IAAJ,CAAS,KAAT,EAAgB,GAAhB;AACA,EAAA,MAAI,YAAJ,GAAmB,MAAnB;;AAEA,EAAA,MAAI,MAAJ,GAAa,YAAY;AACvB,EAAA,QAAI,IAAI,MAAJ,KAAe,GAAnB,EAAwB;AACtB,EAAA,eAAS,IAAT,EAAe,IAAI,YAAnB;AACD,EAAA,KAFD,MAEO;AACL,EAAA,eAAS,GAAT,EAAc,GAAd;AACD,EAAA;AACF,EAAA,GAND;;AAQA,EAAA,MAAI,OAAJ,GAAc,UAAU,GAAV,EAAe;AAC3B,EAAA,aAAS,GAAT;AACD,EAAA,GAFD;;AAIA,EAAA,MAAI,IAAJ;AACD,EAAA;;AAED,EAAA,SAAS,WAAT,CAAsB,KAAtB,EAA6B,MAA7B,EAAqC,GAArC,EAA0C,MAA1C,EAAkD,QAAlD,EAA4D;AAC1D,EAAA,SAAO,UAAU,GAAV,EAAe,GAAf,EAAoB;AACzB,EAAA,QAAI,GAAJ,EAAS;AACP,EAAA,aAAO,IAAP,CAAY,GAAZ;AACD,EAAA;;AAED,EAAA;AACA,EAAA,QAAI,UAAU,IAAI,MAAlB,EAA0B;AACxB,EAAA,eAAS,MAAT,EAAiB,GAAjB;AACD,EAAA,KAFD,MAEO;AACL,EAAA,gBAAU,KAAV,EAAiB,GAAjB,EAAsB,GAAtB,EAA2B,MAA3B,EAAmC,QAAnC;AACD,EAAA;AACF,EAAA,GAXD;AAYD,EAAA;;AAED,EAAA,SAAS,SAAT,CAAoB,KAApB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAAgD,QAAhD,EAA0D;;AAExD,EAAA,MAAI,KAAJ,EAAW,MAAX,EAAmB,YAAY,KAAZ,CAAkB,IAAlB,EAAwB,SAAxB,CAAnB;AACD,EAAA;;AAED,EAAA,SAAS,GAAT,CAAc,GAAd,EAAmB,MAAnB,EAAsD;AAAA,EAAA,MAA3B,QAA2B,yDAAhB,YAAY,EAAI;;AACpD,EAAA,MAAI,SAAS,EAAb;;AAEA,EAAA,MAAI,CAAC,IAAI,MAAT,EAAiB;AACf,EAAA,WAAO,SAAS,MAAT,EAAiB,MAAjB,CAAP;AACD,EAAA;;AAED,EAAA,YAAU,CAAV,EAAa,MAAb,EAAqB,GAArB,EAA0B,MAA1B,EAAkC,QAAlC;AACD,EAAA;;AAED,EAAA,SAAS,QAAT,CAAmB,EAAnB,EAAuB,KAAvB,EAA8B;AAC5B,EAAA,MAAI,WAAW,IAAf;AACA,EAAA,MAAI,WAAW,IAAf;AACA,EAAA,SAAO,YAAY;AAAA,EAAA;UAAA;;AACjB,EAAA,QAAI,QAAJ,EAAc;AACZ,EAAA,iBAAW,IAAX;AACD,EAAA,KAFD,MAEO;AACL,EAAA,SAAG,KAAH,CAAS,IAAT,EAAe,SAAf;AACD,EAAA;;AAED,EAAA,iBAAa,QAAb;;AAEA,EAAA,eAAW,WAAW,YAAM;AAC1B,EAAA,UAAI,QAAJ,EAAc;AACZ,EAAA,WAAG,KAAH;AACD,EAAA;;AAED,EAAA,iBAAW,IAAX;AACA,EAAA,iBAAW,IAAX;AACD,EAAA,KAPU,EAOR,KAPQ,CAAX;AAQD,EAAA,GAjBD;AAkBD,EAAA;;AAED,EAIA,SAAS,QAAT,CAAmB,IAAnB,EAAyB,SAAzB,EAAoC;AAClC,EAAA,MAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,EAAA,WAAO,KAAP;AACD,EAAA;AACD,EAAA,MAAI,YAAY,MAAM,KAAK,SAAX,GAAuB,GAAvC;AACA,EAAA,cAAY,MAAM,SAAN,GAAkB,GAA9B;;AAEA,EAAA,MAAI,UAAU,OAAV,CAAkB,SAAlB,MAAiC,CAAC,CAAtC,EAAyC;AACvC,EAAA,WAAO,IAAP;AACD,EAAA;;AAED,EAAA,SAAO,KAAP;AACD,EAAA;;AAED,EAAA,SAAS,QAAT,CAAmB,IAAnB,EAAyB,SAAzB,EAAoC;;AAElC,EAAA,MAAI,SAAS,IAAT,EAAe,SAAf,CAAJ,EAA+B;AAC7B,EAAA,WAAO,KAAK,SAAZ;AACD,EAAA;;AAED,EAAA,MAAI,KAAK,SAAT,EAAoB;AAClB,EAAA,gBAAY,MAAM,SAAlB;AACD,EAAA;;AAED,EAAA,OAAK,SAAL,IAAkB,SAAlB;;AAEA,EAAA,SAAO,KAAK,SAAZ;AACD,EAAA;;AAED,EAAA,SAAS,WAAT,CAAsB,IAAtB,EAA4B,SAA5B,EAAuC;AACrC,EAAA,MAAI,cAAc,MAAM,SAAxB;AACA,EAAA,MAAI,aAAa,YAAY,GAA7B;;AAEA,EAAA,MAAI,KAAK,SAAL,CAAe,OAAf,CAAuB,WAAvB,MAAwC,CAAC,CAA7C,EAAgD;AAC9C,EAAA,SAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,OAAf,CAAuB,WAAvB,EAAoC,EAApC,CAAjB;AACD,EAAA,GAFD,MAEO,IAAI,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAvB,MAAuC,CAAC,CAA5C,EAA+C;AACpD,EAAA,SAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAvB,EAAmC,EAAnC,CAAjB;AACD,EAAA,GAFM,MAEA;AACL,EAAA,SAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,OAAf,CAAuB,SAAvB,EAAkC,EAAlC,CAAjB;AACD,EAAA;;AAED,EAAA,SAAO,KAAK,SAAZ;AACD,EAAA;;AAED,EAAA,SAAS,IAAT,CAAe,IAAf,EAAqB,IAArB,EAA2B;AACzB,EAAA,SAAO,KAAK,YAAL,CAAkB,UAAU,IAA5B,CAAP;AACD,EAAA;;;AAGD,EAAA,IAAI,iBAAiB;AACnB,EAAA,UAAQ,MADW;AAEnB,EAAA,SAAO,KAFY;AAGnB,EAAA,QAAM,YAHa;AAInB,EAAA,UAAQ,MAJW;AAKnB,EAAA,UAAQ,QALW;AAMnB,EAAA,YAAU;AANS,EAAA,CAArB;;AASA,EAAA,SAAS,OAAT,GAA4D;AAAA,EAAA,MAA1C,IAA0C,yDAAnC,EAAmC;AAAA,EAAA,MAA/B,IAA+B,yDAAxB,EAAwB;AAAA,EAAA,MAApB,aAAoB,yDAAJ,EAAI;;AAC1D,EAAA,MAAI,UAAU,OAAO,aAAP,EAAsB,cAAtB,CAAd;;;AAGA,EAAA,OAAK,IAAI,GAAT,IAAgB,OAAhB,EAAyB;AACvB,EAAA,QAAI,YAAY,IAAI,MAApB;AACA,EAAA,QAAI,KAAK,KAAL,CAAW,EAAC,WAAZ,MAA6B,MAAM,GAAvC,EAA4C;AAC1C,EAAA,aAAO,QAAQ,GAAR,CAAP;AACD,EAAA;AACF,EAAA;;;AAGD,EAAA,OAAK,IAAI,IAAT,IAAgB,OAAhB,EAAyB;AACvB,EAAA,QAAI,SAAS,IAAb,EAAkB;AAChB,EAAA,aAAO,QAAQ,IAAR,CAAP;AACD,EAAA;AACF,EAAA;;AAED,EAAA,SAAO,IAAP;AACD,EAAA;;;;;AC7KD,EAAO,SAAS,SAAT,GAAsB;AAC3B,EAAA;AA4BD,EAAA;;AAED,EAAO,SAAS,eAAT,CAA0B,IAA1B,EAAgC;AACrC,EAAA,iCAA6B,IAA7B;AACD,EAAA;;AAED,EAAO,SAAS,cAAT,GAA2B;AAChC,EAAA;AACD,EAAA;;AAED,EAAO,SAAS,YAAT,CAAuB,IAAvB,EAA6B;AAClC,EAAA,yBAAqB,IAArB;AACD,EAAA;;AAED,EAAO,SAAS,WAAT,CAAsB,IAAtB,EAA4B;AACjC,EAAA,0CAAsC,IAAtC;AACD,EAAA;;AAED,EAAO,SAAS,aAAT,CAAwB,IAAxB,EAA4C;AAAA,EAAA,MAAd,OAAc,yDAAJ,EAAI;;AACjD,EAAA,gDACgC,IADhC,4BAC2D,OAD3D;AAID,EAAA;;AAED,EAAO,SAAS,aAAT,CAAwB,GAAxB,EAA6B;AAClC,EAAA,uBACO,GADP;AAGD,EAAA;;AAED,EAAO,SAAS,WAAT,CAAsB,IAAtB,EAA4B;AACjC,EAAA,4BAAwB,IAAxB;AACD,EAAA;;AAED,EAAO,SAAS,iBAAT,CAA4B,IAA5B,EAAkC;AACvC,EAAA,mCAA+B,IAA/B;AACD,EAAA;;AAED,EAAO,SAAS,WAAT,CAAsB,IAAtB,EAA4B;AACjC,EAAA,4BAAwB,IAAxB;AACD,EAAA;;AAED,EAAO,SAAS,aAAT,CAAwB,GAAxB,EAA6B;AAClC,EAAA,8BAA0B,GAA1B;AACD,EAAA;;AAED,EAAO,SAAS,gBAAT,CAA2B,GAA3B,EAAgC;AACrC,EAAA,iDAA6C,GAA7C;AACD,EAAA;;EC3ED,IAAI,UAAU,EAAd;;AAEA,EAAA,SAAS,IAAT,CAAe,EAAf,EAAmB;AACjB,EAAA,OAAK,IAAI,WAAT,IAAwB,OAAxB,EAAiC;AAC/B,EAAA,QAAI,SAAS,QAAQ,WAAR,CAAb;AACA,EAAA,QAAI,OAAO,GAAP,KAAe,EAAnB,EAAuB;AACrB,EAAA,aAAO,MAAP;AACD,EAAA;AACF,EAAA;;;AAGD,EAAA,QAAM,IAAI,KAAJ,aAAoB,EAApB,yBAAN;AACD,EAAA;;AAED,EAAA,SAAS,QAAT,CAAmB,EAAnB,EAAuB,MAAvB,EAA+B;;AAE7B,EAAA,SAAO,GAAP,GAAa,EAAb;AACA,EAAA,UAAQ,IAAR,CAAa,MAAb;AACD,EAAA;;;AAGD,EAAA,SAAS,IAAT,GAAiB;AAAA,EAAA;;AACf,EAAA,OAAK,IAAL,CAAU,SAAV,EAAqB,OAArB,CAA6B,OAA7B,CAAqC,UAAC,MAAD,EAAY;;AAE/C,EAAA,QAAI,eAAJ;AACA,EAAA,QAAI,mBAAJ;AACA,EAAA,QAAI,gBAAgB,EAApB;AACA,EAAA,QAAI,OAAO,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,EAAA,mBAAa,MAAb;AACD,EAAA,KAFD,MAEO,IAAI,QAAO,MAAP,qDAAO,MAAP,OAAkB,QAAtB,EAAgC;AACrC,EAAA,mBAAa,OAAO,IAApB;AACA,EAAA,sBAAgB,OAAO,OAAP,IAAkB,EAAlC;AACD,EAAA;;AAED,EAAA,aAAS,KAAK,UAAL,CAAT;AACA,EAAA,UAAK,IAAL,CAAU,SAAV,EAAqB,MAArB,IAA+B,IAAI,MAAJ,QAAiB,aAAjB,CAA/B;;AAEA,EAAA,YAAA,CAAc,MAAK,IAAL,CAAU,YAAV,CAAd,EAAuCA,WAAA,CAAqB,UAArB,CAAvC;AACD,EAAA,GAhBD;AAiBD,EAAA;;MCxCoB;AACnB,EAAA,qBAAe;AAAA,EAAA;;AACb,EAAA,SAAK,MAAL,GAAc,EAAd;AACA,EAAA,SAAK,SAAL,GAAiB,EAAjB;AACD,EAAA;;;;2BAEK,OAAO;AACX,EAAA,WAAK,MAAL,CAAY,KAAZ,IAAqB,KAAK,MAAL,CAAY,KAAZ,KAAsB,EAA3C;AACA,EAAA,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAP;AACD,EAAA;;;gCAEU,OAAO,YAA2B;AAAA,EAAA,UAAf,QAAe,yDAAJ,EAAI;;AAC3C,EAAA,UAAI,aAAa,KAAK,IAAL,CAAU,KAAV,CAAjB;AACA,EAAA,iBAAW,SAAX,GAAuB,QAAvB;AACA,EAAA,iBAAW,IAAX,CAAgB,UAAhB;;;AAGA,EAAA,iBAAW,IAAX,CAAgB,UAAU,CAAV,EAAa,CAAb,EAAgB;AAC9B,EAAA,eAAQ,EAAE,SAAF,GAAc,EAAE,SAAjB,GAA8B,CAA9B,GAAoC,EAAE,SAAF,GAAc,EAAE,SAAjB,GAA8B,CAAC,CAA/B,GAAmC,CAA7E;AACD,EAAA,OAFD;AAGD,EAAA;;;;;;8BAGQ,KAAK,IAAI;AAChB,EAAA,UAAI,OAAJ,CAAY,YAAY;;;AAGtB,EAAA,YAAI,CAAC,EAAL,EAAS;AACP,EAAA,cAAI,MAAJ,GAAa,CAAb;AACA,EAAA;AACD,EAAA;;;AAGD,EAAA,YAAI,QAAQ,GAAG,OAAH,CAAW,IAAX,CAAgB,GAAhB,EAAqB,EAArB,CAAZ;;;AAGA,EAAA,YAAI,UAAU,CAAC,CAAf,EAAkB;AAChB,EAAA;AACD,EAAA;;AAED,EAAA,YAAI,MAAJ,CAAW,KAAX,EAAkB,CAAlB;AACD,EAAA,OAjBD;AAkBD,EAAA;;;kCAEY,OAAO,YAAY;;AAE9B,EAAA,UAAI,aAAa,KAAK,IAAL,CAAU,KAAV,CAAjB;AACA,EAAA,WAAK,OAAL,CAAa,UAAb,EAAyB,UAAzB;;;AAGA,EAAA,WAAK,SAAL,CAAe,KAAf,IAAwB,KAAK,SAAL,CAAe,KAAf,KAAyB,EAAjD;AACA,EAAA,WAAK,OAAL,CAAa,KAAK,SAAL,CAAe,KAAf,CAAb,EAAoC,UAApC;AACD,EAAA;;;;;;8BAGQ,OAAoB;AAAA,EAAA,UAAb,MAAa,yDAAJ,EAAI;;AAC3B,EAAA,UAAI,aAAa,KAAK,IAAL,CAAU,KAAV,CAAjB;AACA,EAAA,UAAI,UAAU,EAAd;;AAEA,EAAA,iBAAW,OAAX,CAAmB,UAAU,UAAV,EAAsB;AACvC,EAAA,gBAAQ,IAAR,CAAa,UAAb;AACD,EAAA,OAFD;;AAIA,EAAA,SAAA,CAAS,OAAT,EAAkB,MAAlB,EAA0B,KAAK,YAAL,CAAkB,KAAlB,CAA1B;AACD,EAAA;;;;;;mCAGa,OAAO;AACnB,EAAA,UAAI,MAAM,IAAV;AACA,EAAA,aAAO,YAAY;AAAA,EAAA;cAAA;;AACjB,EAAA,YAAI,SAAJ,CAAc,KAAd,IAAuB,IAAI,SAAJ,CAAc,KAAd,KAAwB,EAA/C;;AAEA,EAAA,YAAI,SAAJ,CAAc,KAAd,EAAqB,OAArB,CAA6B,UAAC,CAAD,EAAO;AAClC,EAAA,YAAE,KAAF;AACD,EAAA,SAFD;AAGD,EAAA,OAND;AAOD,EAAA;;;;;;2BAGK,OAAkC;AAAA,EAAA,UAA3B,QAA2B,yDAAhB,YAAY,EAAI;;AACtC,EAAA,WAAK,SAAL,CAAe,KAAf,IAAwB,KAAK,SAAL,CAAe,KAAf,KAAyB,EAAjD;AACA,EAAA,WAAK,SAAL,CAAe,KAAf,EAAsB,IAAtB,CAA2B,QAA3B;AACD,EAAA;;;;;MCjFkB;AACnB,EAAA,wBAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,cAAUC,MAAA,CAAY,OAAZ,EAAqB,EAArB,CAAV;;;AAGA,EAAA,QAAI,gBAAgB,CAAC,EAAE,YAAY,SAAS,aAAT,CAAuB,QAAvB,CAAd,CAArB;AACA,EAAA,QAAI,eAAe,OAAO,UAAP,CAAkB,aAAlB,CAAgC,4BAAhC,CAAnB;;AAEA,EAAA,QAAI,eAAe,EAAnB;AACA,EAAA,QAAI,iBAAiB,SAAjB,cAAiB,GAAY,EAAjC;;;AAGA,EAAA,QAAI,UAAU;AACZ,EAAA,YAAM,EADM;AAEZ,EAAA,WAAK,EAFO;AAGZ,EAAA,UAAI;AAHQ,EAAA,KAAd;;;AAOA,EAAA,WAAO,gBAAP,CAAwB,SAAxB,EAAmC,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAnC;;;AAGA,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,GAA5C;;;AAGA,EAAA,SAAK,aAAL,GAAqB,aAArB;AACA,EAAA,SAAK,cAAL,GAAsB,cAAtB;AACA,EAAA,SAAK,OAAL,GAAe,OAAf;AACA,EAAA,SAAK,YAAL,GAAoB,YAApB;AACA,EAAA,SAAK,YAAL,GAAoB,YAApB;AACD,EAAA;;;;iCAE6C;AAAA,EAAA,UAApC,KAAoC,yDAA5B,EAA4B;AAAA,EAAA,UAAxB,IAAwB,yDAAjB,EAAiB;AAAA,EAAA,UAAb,MAAa,yDAAJ,EAAI;;AAC5C,EAAA,sZAce,KAdf,6DAiBQ,IAjBR,oMAwBgB,MAxBhB;AA4BD,EAAA;;;6BAEO,QAAQ,UAAU;;AAExB,EAAA,WAAK,OAAL,CAAa,OAAO,IAApB,IAA4B,OAAO,OAAnC;;;AAGA,EAAA,UAAI,kBAAkB,KAAK,YAA3B;AACA,EAAA,WAAK,YAAL,GAAoB,KAAK,QAAL,CAAc,KAAK,OAAL,CAAa,KAAb,CAAd,EAAmC,KAAK,OAAL,CAAa,MAAb,CAAnC,EAAyD,KAAK,OAAL,CAAa,IAAb,CAAzD,CAApB;;;;;;AAMA,EAAA,UAAI,OAAO,WAAP,KAAuB,IAAvB,IAA+B,KAAK,YAAL,KAAsB,eAAzD,EAA0E;AACxE,EAAA,iBAAS,IAAT,EAAe,MAAf;AACA,EAAA;AACD,EAAA;;;;AAID,EAAA,WAAK,cAAL,GAAsB,YAAY;AAChC,EAAA,iBAAS,IAAT,EAAe,MAAf;AACD,EAAA,OAFD;;AAIA,EAAA,WAAK,YAAL,CAAkB,YAAlB,CAA+B,QAA/B,EAAyC,KAAK,YAA9C;;;AAGA,EAAA,UAAI,CAAC,KAAK,aAAV,EAAyB;;;;AAIvB,EAAA,YAAI,QAAQ,wDAAZ;;AAEA,EAAA,aAAK,YAAL,CAAkB,YAAlB,CAA+B,KAA/B,EAAsC,KAAtC;;;;;AAKA,EAAA,YAAI,KAAK,YAAL,CAAkB,aAAtB,EAAqC;AACnC,EAAA,eAAK,YAAL,CAAkB,aAAlB,CAAgC,QAAhC,GAA2C,KAA3C;AACD,EAAA;AACF,EAAA;AACF,EAAA;;;+BAES,GAAG;;AAEX,EAAA,UAAI,EAAE,MAAF,KAAa,KAAK,YAAL,CAAkB,aAAnC,EAAkD;AAChD,EAAA;AACD,EAAA;;AAED,EAAA,UAAI,OAAO,KAAK,KAAL,CAAW,EAAE,IAAb,CAAX;AACA,EAAA,UAAI,KAAK,IAAL,KAAc,kBAAlB,EAAsC;AACpC,EAAA,aAAK,cAAL;AACD,EAAA;AACF,EAAA;;;;;MCpHkB;AACnB,EAAA,4BAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,cAAUA,MAAA,CAAY,OAAZ,EAAqB,EAArB,CAAV;;;AAGA,EAAA,QAAI,iBAAiB,CACnB,wBADmB,EAEnB,wBAFmB,EAGnB,0BAHmB,EAInB,0BAJmB,EAKnB,iBALmB,EAMnB,iBANmB,EAOnB,oBAPmB,EAQnB,oBARmB,EASnB,oBATmB,EAUnB,oBAVmB,EAWnB,oBAXmB,EAYnB,oBAZmB,EAanB,cAbmB,EAcnB,iBAdmB,EAenB,mBAfmB,EAgBnB,mBAhBmB,CAArB;;;AAoBA,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB;;;AAGA,EAAA,SAAK,cAAL,GAAsB,cAAtB;AACD,EAAA;;;;6BAEO,QAAQ,UAAU;AACxB,EAAA,UAAI,OAAO,IAAP,KAAgB,MAApB,EAA4B;AAC1B,EAAA,eAAO,SAAS,IAAT,EAAe,MAAf,CAAP;AACD,EAAA;;;;AAID,EAAA,UAAI,WAAW,SAAS,aAAT,CAAuB,KAAvB,CAAf;AACA,EAAA,eAAS,SAAT,GAAqB,OAAO,OAA5B;;AAEA,EAAA,UAAI,WAAW,IAAf;;;AAGA,EAAA,UAAI,WAAW,SAAS,gBAAT,CAA0B,QAA1B,CAAf;AACA,EAAA,WAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,SAAS,MAA7B,EAAqC,GAArC,EAA0C;AACxC,EAAA,mBAAW,SAAS,CAAT,EAAY,YAAZ,CAAyB,MAAzB,CAAX;;;;;AAKA,EAAA,YAAI,CAAC,QAAD,IAAa,KAAK,cAAL,CAAoB,OAApB,CAA4B,QAA5B,MAA0C,CAAC,CAA5D,EAA+D;AAC7D,EAAA,mBAAS,CAAT,EAAY,UAAZ,CAAuB,WAAvB,CAAmC,SAAS,CAAT,CAAnC;AACD,EAAA;AACF,EAAA;;AAED,EAAA,aAAO,OAAP,GAAiB,SAAS,SAA1B;;AAEA,EAAA,eAAS,IAAT,EAAe,MAAf;AACD,EAAA;;;;;MC5DkB;AACnB,EAAA,qBAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,QAAI,WAAW,CAAf;AACA,EAAA,QAAI,CAAJ;;AAEA,EAAA,SAAK,MAAL,GAAc,EAAd;AACA,EAAA,SAAK,MAAL,GAAc,MAAd;;AAEA,EAAA,cAAUA,MAAA,CAAY,OAAZ,EAAqB,EAArB,CAAV;;;AAGA,EAAA,QAAI,OAAO,OAAO,GAAd,KAAsB,WAA1B,EAAuC;AACrC,EAAA;AACD,EAAA;;AAED,EAAA,QAAI,WAAW,OAAO,UAAP,CAAkB,gBAAlB,CAAmC,gBAAnC,CAAf;;AAEA,EAAA,SAAK,IAAI,CAAT,EAAY,IAAI,SAAS,MAAzB,EAAiC,GAAjC,EAAsC;AACpC,EAAA,UAAI,YAAY,SAAS,CAAT,EAAY,aAAZ,CAA0B,UAA1B,CAAhB;AACA,EAAA,UAAI,OAAOC,IAAA,CAAU,SAAV,EAAqB,aAArB,CAAX;AACA,EAAA,UAAI,OAAOA,IAAA,CAAU,SAAV,EAAqB,aAArB,CAAX;;AAEA,EAAA,UAAI,gBAAgB,SAAS,aAAT,CAAuB,KAAvB,CAApB;AACA,EAAA,eAAS,CAAT,EAAY,WAAZ,CAAwB,aAAxB;;AAEA,EAAA,WAAK,MAAL,CAAY,IAAZ,IAAoB,OAAO,GAAP,CAAW,IAAX,CAAgB,aAAhB,CAApB;AACA,EAAA,UAAI,SAAS,KAAK,MAAL,CAAY,IAAZ,CAAb;;AAEA,EAAA,UAAI,gBAAgBD,MAAA,CAAY,OAAZ,CAApB;;AAEA,EAAA,aAAO,UAAP,GAAoB,OAApB,CAA4B,cAAcE,OAAA,CAAa,IAAb,EAAmB,IAAnB,CAA1C;AACA,EAAA,aAAO,UAAP,GAAoB,UAApB,CAA+B,aAA/B;;AAEA,EAAA,aAAO,eAAP,GAAyB,QAAzB;AACD,EAAA;;AAED,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;AACD,EAAA;;;;mCAEa,QAAQ;AAAA,EAAA;;AACpB,EAAA,aAAO,YAAM;AACX,EAAA,cAAK,MAAL,CAAY,OAAZ,CAAoB,QAApB,EAA8B,MAA9B;AACD,EAAA,OAFD;AAGD,EAAA;;;6BAEO,QAAQ,UAAU;AACxB,EAAA,UAAI,SAAS,KAAK,MAAL,CAAY,OAAO,IAAnB,CAAb;;;;;AAKA,EAAA,UAAI,CAAC,OAAO,SAAZ,EAAuB;AACrB,EAAA,eAAO,UAAP,GAAoB,QAApB,CAA6B,OAAO,OAApC;;;AAGA,EAAA,eAAO,SAAP,GAAmB,MAAnB;AACA,EAAA,eAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,YAAL,CAAkB,MAAlB,CAApB;AACD,EAAA;;;AAGD,EAAA,aAAO,OAAP,GAAiB,OAAO,QAAP,EAAjB;AACA,EAAA,eAAS,IAAT,EAAe,MAAf;AACD,EAAA;;;;;MC9DkB;AACnB,EAAA,4BAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,QAAI,WAAW,CAAf;AACA,EAAA,QAAI,CAAJ;;AAEA,EAAA,SAAK,MAAL,GAAc,EAAd;AACA,EAAA,SAAK,MAAL,GAAc,MAAd;;;AAGA,EAAA,QAAI,UAAU;AACZ,EAAA,cAAQ;AADI,EAAA,KAAd;;AAIA,EAAA,cAAUF,MAAA,CAAY,OAAZ,EAAqB;AAC7B,EAAA,mBAAa;AADgB,EAAA,KAArB,CAAV;;;AAKA,EAAA,QAAI,OAAO,OAAO,UAAd,KAA6B,WAAjC,EAA8C;AAC5C,EAAA;AACD,EAAA;;AAED,EAAA,QAAI,WAAW,OAAO,UAAP,CAAkB,gBAAlB,CAAmC,gBAAnC,CAAf;;AAEA,EAAA,SAAK,IAAI,CAAT,EAAY,IAAI,SAAS,MAAzB,EAAiC,GAAjC,EAAsC;AACpC,EAAA,UAAI,YAAY,SAAS,CAAT,EAAY,aAAZ,CAA0B,UAA1B,CAAhB;AACA,EAAA,UAAI,OAAOC,IAAA,CAAU,SAAV,EAAqB,aAArB,CAAX;AACA,EAAA,UAAI,OAAOA,IAAA,CAAU,SAAV,EAAqB,aAArB,CAAX;;AAEA,EAAA,WAAK,MAAL,CAAY,IAAZ,IAAoB,OAAO,UAAP,CAAkB,YAAlB,CAA+B,SAA/B,EAA0C,OAA1C,CAApB;AACA,EAAA,WAAK,MAAL,CAAY,IAAZ,EAAkB,SAAlB,CAA4B,MAA5B,EAAoCC,OAAA,CAAa,IAAb,EAAmB,IAAnB,EAAyB,OAAzB,CAApC;AACD,EAAA;;AAED,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;AACD,EAAA;;;;mCAEa,QAAQ;AAAA,EAAA;;AACpB,EAAA,aAAO,YAAM;;AAEX,EAAA,cAAK,MAAL,CAAY,OAAZ,CAAoB,QAApB,EAA8B,MAA9B;AACD,EAAA,OAHD;AAID,EAAA;;;6BAEO,QAAQ,UAAU;AACxB,EAAA,UAAI,SAAS,KAAK,MAAL,CAAY,OAAO,IAAnB,CAAb;;;;;AAKA,EAAA,UAAI,CAAC,OAAO,QAAZ,EAAsB;AACpB,EAAA,eAAO,QAAP,CAAgB,OAAO,OAAvB;;;AAGA,EAAA,eAAO,QAAP,GAAkB,MAAlB;AACA,EAAA,eAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,YAAL,CAAkB,MAAlB,CAApB;AACD,EAAA;;;AAGD,EAAA,aAAO,OAAP,GAAiB,OAAO,QAAP,EAAjB;AACA,EAAA,eAAS,IAAT,EAAe,MAAf;AACD,EAAA;;;;;MC5DkB;AACnB,EAAA,sBAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,QAAI,WAAW,EAAf;;AAEA,EAAA,cAAUF,MAAA,CAAY,OAAZ,EAAqB,EAArB,CAAV;;;AAGA,EAAA,QAAI,OAAO,OAAO,IAAd,KAAuB,WAA3B,EAAwC;AACtC,EAAA;AACD,EAAA;;;AAGD,EAAA,WAAO,UAAP,CAAkB,aAAlB,CAAgC,2BAAhC,EAA6D,SAA7D,GAAyE,MAAzE;;AAEA,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;AACD,EAAA;;;;6BAEO,QAAQ;AACd,EAAA,UAAI,OAAO,IAAP,KAAgB,KAApB,EAA2B;AACzB,EAAA,eAAO,KAAP;AACD,EAAA;;AAED,EAAA,aAAQ,OAAO,IAAP,CAAY,OAAZ,CAAoB,OAApB,MAAiC,CAAC,CAAlC,IAAuC,OAAO,IAAP,KAAgB,EAA/D;AACD,EAAA;;;6BAEO,QAAQ,UAAU;;AAExB,EAAA,UAAI,KAAK,MAAL,CAAY,MAAZ,CAAJ,EAAyB;AACvB,EAAA,eAAO,IAAP,CAAY,MAAZ,CAAmB,OAAO,OAA1B,EAAmC,KAAK,OAAxC,EAAiD,UAAC,GAAD,EAAM,GAAN,EAAc;AAC7D,EAAA,cAAI,GAAJ,EAAS;AACP,EAAA,mBAAO,SAAS,GAAT,EAAc,MAAd,CAAP;AACD,EAAA,WAFD,MAEO;;AAEL,EAAA,mBAAO,OAAP,GAAiB,IAAI,GAArB;AACD,EAAA;;AAED,EAAA,mBAAS,IAAT,EAAe,MAAf;AACD,EAAA,SATD;AAUD,EAAA,OAXD,MAWO;;;AAGL,EAAA,iBAAS,IAAT,EAAe,MAAf;AACD,EAAA;AACF,EAAA;;;;;MC3CkB;AACnB,EAAA,8BAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,QAAI,WAAW,EAAf;;AAEA,EAAA,cAAUA,MAAA,CAAY,OAAZ,EAAqB,EAArB,CAAV;;;AAGA,EAAA,QAAI,OAAO,OAAO,YAAd,KAA+B,WAAnC,EAAgD;AAC9C,EAAA;AACD,EAAA;;;AAGD,EAAA,WAAO,UAAP,CAAkB,aAAlB,CAAgC,0BAAhC,EAA4D,SAA5D,GAAwE,cAAxE;;AAEA,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;AACD,EAAA;;;;+BAES,QAAQ;AAChB,EAAA,UAAI,OAAO,IAAP,KAAgB,IAApB,EAA0B;AACxB,EAAA,eAAO,KAAP;AACD,EAAA;;AAED,EAAA,aAAQ,OAAO,IAAP,CAAY,OAAZ,CAAoB,SAApB,MAAmC,CAAC,CAApC,IAAyC,OAAO,IAAP,KAAgB,EAAjE;AACD,EAAA;;;6BAEO,QAAQ,UAAU;;AAExB,EAAA,UAAI,KAAK,QAAL,CAAc,MAAd,CAAJ,EAA2B;AACzB,EAAA,YAAI;AACF,EAAA,iBAAO,OAAP,GAAiB,OAAO,YAAP,CAAoB,OAApB,CAA4B,OAAO,OAAnC,CAAjB;AACD,EAAA,SAFD,CAEE,OAAO,GAAP,EAAY;AACZ,EAAA,iBAAO,SAAS,GAAT,EAAc,MAAd,CAAP;AACD,EAAA;AACF,EAAA;;AAED,EAAA,eAAS,IAAT,EAAe,MAAf;AACD,EAAA;;;;;MCpCkB;AACnB,EAAA,wBAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,QAAI,WAAW,EAAf;;AAEA,EAAA,cAAUA,MAAA,CAAY,OAAZ,EAAqB,EAArB,CAAV;;;AAGA,EAAA,QAAI,OAAO,OAAO,MAAd,KAAyB,WAA7B,EAA0C;AACxC,EAAA;AACD,EAAA;;;AAGD,EAAA,WAAO,UAAP,CAAkB,aAAlB,CAAgC,2BAAhC,EAA6D,SAA7D,GAAyE,QAAzE;;AAEA,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;AACD,EAAA;;;;+BAES,QAAQ;AAChB,EAAA,UAAI,OAAO,IAAP,KAAgB,KAApB,EAA2B;AACzB,EAAA,eAAO,KAAP;AACD,EAAA;;AAED,EAAA,aAAQ,OAAO,IAAP,CAAY,OAAZ,CAAoB,OAApB,MAAiC,CAAC,CAAlC,IAAuC,OAAO,IAAP,KAAgB,EAA/D;AACD,EAAA;;;6BAEO,QAAQ,UAAU;;AAExB,EAAA,UAAI,KAAK,QAAL,CAAc,MAAd,CAAJ,EAA2B;AACzB,EAAA,eAAO,MAAP,CAAc,OAAO,OAArB,EAA8B,KAAK,OAAnC,EAA4C,MAA5C,CAAmD,UAAC,GAAD,EAAM,GAAN,EAAc;AAC/D,EAAA,cAAI,GAAJ,EAAS;AACP,EAAA,mBAAO,SAAS,GAAT,EAAc,MAAd,CAAP;AACD,EAAA,WAFD,MAEO;;AAEL,EAAA,mBAAO,OAAP,GAAiB,GAAjB;AACD,EAAA;;AAED,EAAA,mBAAS,IAAT,EAAe,MAAf;AACD,EAAA,SATD;AAUD,EAAA,OAXD,MAWO;;;AAGL,EAAA,iBAAS,IAAT,EAAe,MAAf;AACD,EAAA;AACF,EAAA;;;;;MC3CkB;AACnB,EAAA,uBAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,QAAI,WAAW,EAAf;;AAEA,EAAA,SAAK,OAAL,GAAeA,MAAA,CAAY,OAAZ,EAAqB,EAArB,CAAf;;;AAGA,EAAA,QAAI,OAAO,OAAO,KAAd,KAAwB,WAA5B,EAAyC;;AAEvC,EAAA,WAAK,KAAL,GAAa,OAAO,KAApB;AACD,EAAA,KAHD,MAGO,IAAI,OAAO,OAAO,KAAd,KAAwB,WAA5B,EAAyC;;AAE9C,EAAA,WAAK,KAAL,GAAa;AACX,EAAA,mBAAW,OAAO;AADP,EAAA,OAAb;AAGD,EAAA,KALM,MAKA;AACL,EAAA;AACD,EAAA;;;AAGD,EAAA,WAAO,UAAP,CAAkB,aAAlB,CAAgC,0BAAhC,EAA4D,SAA5D,GAAwE,QAAxE;;AAEA,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;AACD,EAAA;;;;6BAEO,QAAQ,UAAU;;AAExB,EAAA,UAAI,OAAO,IAAP,KAAgB,IAApB,EAA0B;AACxB,EAAA,YAAI;AACF,EAAA,iBAAO,OAAP,GAAiB,KAAK,KAAL,CAAW,SAAX,CAAqB,OAAO,OAA5B,EAAqC,KAAK,OAA1C,EAAmD,IAApE;AACD,EAAA,SAFD,CAEE,OAAO,GAAP,EAAY;AACZ,EAAA,iBAAO,SAAS,GAAT,EAAc,MAAd,CAAP;AACD,EAAA;;AAED,EAAA,iBAAS,IAAT,EAAe,MAAf;AACD,EAAA,OARD,MAQO;;;AAGL,EAAA,iBAAS,IAAT,EAAe,MAAf;AACD,EAAA;AACF,EAAA;;;;;MCxCkB;AACnB,EAAA,0BAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,QAAI,WAAW,EAAf;;AAEA,EAAA,SAAK,OAAL,GAAeA,MAAA,CAAY,OAAZ,EAAqB,EAArB,CAAf;;;AAGA,EAAA,QAAI,OAAO,OAAO,MAAd,KAAyB,WAA7B,EAA0C;AACxC,EAAA;AACD,EAAA;;AAED,EAAA,WAAO,MAAP,CAAc,UAAd,CAAyB,OAAzB;;;AAGA,EAAA,WAAO,UAAP,CAAkB,aAAlB,CAAgC,4BAAhC,EAA8D,SAA9D,GAA0E,UAA1E;;AAEA,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;AACD,EAAA;;;;6BAEO,QAAQ,UAAU;;AAExB,EAAA,UAAI,OAAO,IAAP,KAAgB,MAApB,EAA4B;AAC1B,EAAA,YAAI;AACF,EAAA,iBAAO,OAAP,GAAiB,OAAO,MAAP,CAAc,OAAO,OAArB,CAAjB;AACD,EAAA,SAFD,CAEE,OAAO,GAAP,EAAY;AACZ,EAAA,iBAAO,SAAS,GAAT,EAAc,MAAd,CAAP;AACD,EAAA;;AAED,EAAA,iBAAS,IAAT,EAAe,MAAf;AACD,EAAA,OARD,MAQO;;;AAGL,EAAA,iBAAS,IAAT,EAAe,MAAf;AACD,EAAA;AACF,EAAA;;;;;MClCkB;AACnB,EAAA,yBAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,cAAUA,MAAA,CAAY,OAAZ,EAAqB;AAC7B,EAAA,iBAAW;AADkB,EAAA,KAArB,CAAV;;AAIA,EAAA,QAAI,WAAW,EAAf;AACA,EAAA,QAAI,UAAU,EAAd;AACA,EAAA,QAAI,eAAe,CAAnB;AACA,EAAA,QAAI,0BAAwB,KAAK,OAAL,CAAa,QAAb,EAAxB,SAAJ;AACA,EAAA,QAAI,eAAe;AACjB,EAAA,YAAM,EADW;AAEjB,EAAA,WAAK,EAFY;AAGjB,EAAA,UAAI;AAHa,EAAA,KAAnB;;AAMA,EAAA,QAAI,UAAU,OAAO,UAAP,CAAkB,aAAlB,CAAgC,4BAAhC,CAAd;;;AAGA,EAAA,QAAI,OAAO,SAAS,aAAT,CAAuB,IAAvB,CAAX;AACA,EAAA,YAAA,CAAc,IAAd,EAAoB,yCAApB;AACA,EAAA,SAAK,SAAL,GAAiB,uDAAjB;;AAEA,EAAA,QAAI,QAAQ,SAAS,aAAT,CAAuB,KAAvB,CAAZ;AACA,EAAA,YAAA,CAAc,KAAd,EAAqB,iCAArB;;AAEA,EAAA,UAAM,SAAN;;AAUA,EAAA,WAAO,UAAP,CAAkB,WAAlB,CAA8B,KAA9B;AACA,EAAA,WAAO,UAAP,CAAkB,aAAlB,CAAgC,aAAhC,EAA+C,WAA/C,CAA2D,IAA3D;;AAEA,EAAA,QAAI,aAAa,OAAO,UAAP,CAAkB,aAAlB,CAAgC,2BAAhC,CAAjB;AACA,EAAA,QAAI,UAAU,OAAO,UAAP,CAAkB,aAAlB,CAAgC,wBAAhC,CAAd;AACA,EAAA,QAAI,SAAS,OAAO,UAAP,CAAkB,aAAlB,CAAgC,6BAAhC,CAAb;AACA,EAAA,QAAI,aAAa,OAAO,UAAP,CAAkB,aAAlB,CAAgC,uBAAhC,CAAjB;AACA,EAAA,QAAI,SAAS,OAAO,UAAP,CAAkB,aAAlB,CAAgC,uBAAhC,CAAb;;;AAGA,EAAA,eAAW,gBAAX,CAA4B,QAA5B,EAAsC,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAtC;;;AAGA,EAAA,WAAO,gBAAP,CAAwB,SAAxB,EAAmC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAnC;;;AAGA,EAAA,WAAO,gBAAP,CAAwB,OAAxB,EAAiC,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,CAAjC;;;AAGA,EAAA,QAAI,QAAQ,SAAR,KAAsB,IAA1B,EAAgC;AAC9B,EAAA,aAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAApB,EAA+C,WAAW,CAA1D;AACD,EAAA;;;AAGD,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;;;AAGA,EAAA,WAAO,gBAAP,CAAwB,SAAxB,EAAmC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAnC;;;AAGA,EAAA,SAAK,UAAL,GAAkB,UAAlB;AACA,EAAA,SAAK,MAAL,GAAc,MAAd;AACA,EAAA,SAAK,OAAL,GAAe,OAAf;AACA,EAAA,SAAK,OAAL,GAAe,OAAf;AACA,EAAA,SAAK,OAAL,GAAe,OAAf;AACA,EAAA,SAAK,YAAL,GAAoB,YAApB;AACA,EAAA,SAAK,iBAAL,GAAyB,iBAAzB;AACA,EAAA,SAAK,YAAL,GAAoB,YAApB;AACD,EAAA;;;;iCAEW,GAAG;;AAEb,EAAA,UAAI,EAAE,MAAF,KAAa,KAAK,OAAL,CAAa,aAA9B,EAA6C;AAC3C,EAAA;AACD,EAAA;;AAED,EAAA,UAAI,OAAO,KAAK,KAAL,CAAW,EAAE,IAAb,CAAX;AACA,EAAA,UAAI,KAAK,IAAL,KAAc,oBAAlB,EAAwC;AACtC,EAAA,aAAK,GAAL,CAAS,KAAK,OAAd;AACD,EAAA;AACF,EAAA;;;gCAEU,QAAQ,UAAU;AAC3B,EAAA,UAAI,qBAAqB,OAAO,OAAhC;;;AAGA,EAAA,UAAI,OAAO,IAAP,KAAgB,IAApB,EAA0B;AACxB,EAAA,6BAAqB,mBAAmB,OAAnB,CAA2B,KAAK,iBAAhC,EAAmD,EAAnD,CAArB;AACD,EAAA;;;;AAID,EAAA,UAAI,OAAO,WAAP,KAAuB,IAAvB,IAA+B,KAAK,YAAL,CAAkB,OAAO,IAAzB,MAAmC,kBAAtE,EAA0F;AACxF,EAAA,aAAK,KAAL;AACD,EAAA;;;AAGD,EAAA,WAAK,YAAL,CAAkB,OAAO,IAAzB,IAAiC,kBAAjC;;AAEA,EAAA,eAAS,IAAT,EAAe,MAAf;AACD,EAAA;;;6BAEO,QAAQ,UAAU;;AAExB,EAAA,UAAI,OAAO,IAAP,KAAgB,IAApB,EAA0B;;;AAGxB,EAAA,eAAO,SAAS,IAAT,EAAe,MAAf,CAAP;AACD,EAAA;;;;;;AAMD,EAAA,UAAI,OAAO,OAAP,CAAe,OAAf,CAAuB,KAAK,iBAA5B,MAAmD,CAAC,CAAxD,EAA2D;AACzD,EAAA,eAAO,OAAP,QAAoB,KAAK,iBAAzB,GAA6C,OAAO,OAApD;AACD,EAAA;;AAED,EAAA,eAAS,IAAT,EAAe,MAAf;AACD,EAAA;;;;;;gCAGU;;AAET,EAAA,UAAI,OAAO,OAAO,OAAd,KAA0B,WAA1B,IAAyC,OAAO,OAAO,OAAP,CAAe,GAAtB,KAA8B,WAA3E,EAAwF;AACtF,EAAA,eAAO,OAAP,GAAiB;AACf,EAAA,eAAK,eAAY;AADF,EAAA,SAAjB;AAGD,EAAA;;;AAGD,EAAA,UAAI,gBAAgB,SAAS,SAAT,CAAmB,IAAnB,CAAwB,IAAxB,CAA6B,OAAO,OAAP,CAAe,GAA5C,EAAiD,OAAO,OAAxD,CAApB;;AAEA,EAAA,aAAO,OAAP,CAAe,GAAf,GAAqB,YAAY;;AAE/B,EAAA,WAAG,KAAH,CAAS,IAAT,CAAc,SAAd,EAAyB,OAAzB,CAAiC,UAAU,OAAV,EAAmB;AAClD,EAAA,iBAAO,MAAP,CAAc,WAAd,CAA0B,KAAK,SAAL,CAAe;AACvC,EAAA,kBAAM,oBADiC;AAEvC,EAAA,qBAAS;AAF8B,EAAA,WAAf,CAA1B,EAGI,GAHJ;AAID,EAAA,SALD;;;;AASA,EAAA,sBAAc,KAAd,CAAoB,aAApB,EAAmC,SAAnC;AACD,EAAA,OAZD;AAaD,EAAA;;;4BAEwB;AAAA,EAAA,UAApB,OAAoB,yDAAV,EAAU;AAAA,EAAA,UAAN,IAAM;;AACvB,EAAA,UAAI,OAAO,SAAS,aAAT,CAAuB,IAAvB,CAAX;AACA,EAAA,cAAA,CAAc,IAAd,EAAoB,oBAApB;;AAEA,EAAA,UAAI,OAAO,IAAP,KAAgB,WAApB,EAAiC;AAC/B,EAAA,gBAAA,CAAc,IAAd,0BAA0C,IAA1C;AACD,EAAA;;AAED,EAAA,WAAK,SAAL,GAAiB,OAAjB;;AAEA,EAAA,WAAK,OAAL,CAAa,WAAb,CAAyB,IAAzB;AACD,EAAA;;;6BAEO,GAAG;AACT,EAAA,UAAI,aAAa,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,EAAjB;;;AAGA,EAAA,UAAI,eAAe,EAAnB,EAAuB;AACrB,EAAA,eAAO,EAAE,cAAF,EAAP;AACD,EAAA;;;AAGD,EAAA,WAAK,OAAL,CAAa,IAAb,CAAkB,UAAlB;AACA,EAAA,WAAK,YAAL,GAAoB,KAAK,OAAL,CAAa,MAAjC;;;AAGA,EAAA,WAAK,GAAL,CAAS,UAAT,EAAqB,SAArB;;;AAGA,EAAA,UAAI,WAAW,OAAX,CAAmB,QAAnB,MAAiC,CAArC,EAAwC;AACtC,EAAA,qBAAa,YAAY,UAAzB;AACD,EAAA;;;AAGD,EAAA,UAAI;;AAEF,EAAA,YAAI,eAAe,KAAK,OAAL,CAAa,aAAb,CAA2B,IAA3B,mBAAgD,UAAhD,UAAnB;;AAEA,EAAA,aAAK,GAAL,CAAS,YAAT;AACD,EAAA,OALD,CAKE,OAAO,GAAP,EAAY;AACZ,EAAA,aAAK,GAAL,CAAS,GAAT,EAAc,OAAd;AACD,EAAA;;;AAGD,EAAA,WAAK,MAAL,CAAY,KAAZ,GAAoB,EAApB;;;;AAIA,EAAA,WAAK,UAAL,CAAgB,SAAhB,GAA4B,KAAK,UAAL,CAAgB,YAA5C;;AAEA,EAAA,QAAE,cAAF;AACD,EAAA;;;8BAEQ;AACP,EAAA,WAAK,OAAL,CAAa,SAAb,GAAyB,EAAzB;AACD,EAAA;;;8BAEQ,GAAG;AACV,EAAA,UAAI,KAAK,EAAT;AACA,EAAA,UAAI,OAAO,EAAX;AACA,EAAA,UAAI,aAAa,KAAjB;AACA,EAAA,UAAI,iBAAiB,KAAK,MAAL,CAAY,cAAjC;;;;AAIA,EAAA,UAAI,EAAE,OAAF,KAAc,EAAd,IAAoB,KAAK,YAAL,KAAsB,CAA1C,IAA+C,mBAAmB,CAAtE,EAAyE;AACvE,EAAA,aAAK,YAAL;AACA,EAAA,qBAAa,IAAb;AACD,EAAA;;;;AAID,EAAA,UAAI,EAAE,OAAF,KAAc,IAAd,IAAsB,KAAK,YAAL,KAAsB,KAAK,OAAL,CAAa,MAAb,GAAsB,CAAlE,IAAuE,mBAAmB,KAAK,MAAL,CAAY,KAAZ,CAAkB,MAAhH,EAAwH;AACtH,EAAA,aAAK,YAAL;AACA,EAAA,qBAAa,IAAb;AACD,EAAA;;;AAGD,EAAA,UAAI,UAAJ,EAAgB;AACd,EAAA,aAAK,MAAL,CAAY,KAAZ,GAAoB,KAAK,OAAL,CAAa,KAAK,YAAlB,CAApB;AACD,EAAA;AACF,EAAA;;;;;MC1OkB;AACnB,EAAA,sBAAa,MAAb,EAAqB,OAArB,EAA8B;AAAA,EAAA;;AAC5B,EAAA,cAAUA,MAAA,CAAY,OAAZ,EAAqB;AAC7B,EAAA,gBAAU;AADmB,EAAA,KAArB,CAAV;;AAIA,EAAA,QAAI,WAAW,EAAf;;AAEA,EAAA,QAAI,QAAQ,EAAZ;;;AAGA,EAAA,QAAI,OAAO,EAAX;;;;AAIA,EAAA,QAAI,QAAQ,QAAR,KAAqB,KAAzB,EAAgC;AAC9B,EAAA,cAAQ;AACN,EAAA,cAAM;AACJ,EAAA,gBAAM,MADF;AAEJ,EAAA,mBAAS;AAFL,EAAA,SADA;AAKN,EAAA,aAAK;AACH,EAAA,gBAAM,KADH;AAEH,EAAA,mBAAS;AAFN,EAAA,SALC;AASN,EAAA,YAAI;AACF,EAAA,gBAAM,IADJ;AAEF,EAAA,mBAAS;AAFP,EAAA;AATE,EAAA,OAAR;AAcD,EAAA;;;AAGD,EAAA,QAAI,UAAU,SAAS,aAAT,CAAuB,QAAvB,CAAd;AACA,EAAA,YAAQ,SAAR,GAAoB,kCAApB;AACA,EAAA,YAAQ,SAAR,GAAoB,KAApB;;AAEA,EAAA,WAAO,UAAP,CAAkB,WAAlB,CAA8B,OAA9B;AACA,EAAA,YAAQ,gBAAR,CAAyB,OAAzB,EAAkC,KAAK,GAAL,CAAS,IAAT,CAAc,IAAd,CAAlC;;;AAGA,EAAA,WAAO,EAAP,CAAU,QAAV,EAAoB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAApB,EAA4C,QAA5C;;;AAGA,EAAA,SAAK,KAAL,GAAa,KAAb;AACA,EAAA,SAAK,IAAL,GAAY,IAAZ;AACA,EAAA,SAAK,MAAL,GAAc,MAAd;AACD,EAAA;;;;6BAEO,QAAQ,UAAU;;AAExB,EAAA,WAAK,IAAL,CAAU,OAAO,IAAjB,IAAyBA,MAAA,CAAY,MAAZ,CAAzB;;;AAGA,EAAA,UAAI,OAAO,KAAK,KAAL,CAAW,OAAO,IAAlB,CAAP,KAAmC,WAAvC,EAAoD;;AAElD,EAAA,YAAI,KAAK,IAAL,CAAU,OAAO,IAAjB,EAAuB,IAAvB,IACA,KAAK,IAAL,CAAU,OAAO,IAAjB,EAAuB,IAAvB,CAA4B,QAA5B,KAAyC,IAD7C,EACoD;AAClD,EAAA,eAAK,GAAL;;AAEA,EAAA,eAAK,IAAL,CAAU,OAAO,IAAjB,EAAuB,IAAvB,CAA4B,QAA5B,GAAuC,IAAvC;AACD,EAAA;;AAED,EAAA,iBAAS,IAAT,EAAe,KAAK,KAAL,CAAW,OAAO,IAAlB,CAAf;;;;AAIA,EAAA,aAAK,KAAL,CAAW,OAAO,IAAlB,EAAwB,WAAxB,GAAsC,IAAtC;AACD,EAAA,OAdD,MAcO;;AAEL,EAAA,aAAK,KAAL,CAAW,OAAO,IAAlB,IAA0BA,MAAA,CAAY,MAAZ,CAA1B;;AAEA,EAAA,iBAAS,IAAT,EAAe,MAAf;AACD,EAAA;AACF,EAAA;;;4BAEM;;AAEL,EAAA,WAAK,IAAI,IAAT,IAAiB,KAAK,IAAtB,EAA4B;AAC1B,EAAA,aAAK,KAAL,CAAW,IAAX,IAAmBA,MAAA,CAAY,KAAK,IAAL,CAAU,IAAV,CAAZ,EAA6B;;AAE9C,EAAA,uBAAa;AAFiC,EAAA,SAA7B,CAAnB;;;AAMA,EAAA,aAAK,MAAL,CAAY,OAAZ,CAAoB,QAApB,EAA8B,KAAK,KAAL,CAAW,IAAX,CAA9B;AACD,EAAA;AACF,EAAA;;;;;EC5EY,SAAS,aAAT,CAAwB,MAAxB,EAAgC;AAC7C,EAAA,SAAO,MAAP,CAAc,QAAd,EAAwB,YAAxB;AACA,EAAA,SAAO,MAAP,CAAc,YAAd,EAA4B,gBAA5B;;AAEA,EAAA,SAAO,MAAP,CAAc,KAAd,EAAqB,SAArB;AACA,EAAA,SAAO,MAAP,CAAc,YAAd,EAA4B,gBAA5B;AACA,EAAA,SAAO,MAAP,CAAc,MAAd,EAAsB,UAAtB;AACA,EAAA,SAAO,MAAP,CAAc,cAAd,EAA8B,kBAA9B;AACA,EAAA,SAAO,MAAP,CAAc,QAAd,EAAwB,YAAxB;AACA,EAAA,SAAO,MAAP,CAAc,OAAd,EAAuB,WAAvB;AACA,EAAA,SAAO,MAAP,CAAc,UAAd,EAA0B,cAA1B;AACA,EAAA,SAAO,MAAP,CAAc,SAAd,EAAyB,aAAzB;AACA,EAAA,SAAO,MAAP,CAAc,MAAd,EAAsB,UAAtB;AACD,EAAA;;MCtBK;AACJ,EAAA,kBAAa,gBAAb,EAA+B,IAA/B,EAAqC;AAAA,EAAA;;AACnC,EAAA,QAAI,CAAC,gBAAL,EAAuB;AACrB,EAAA,YAAM,IAAI,KAAJ,CAAU,+BAAV,CAAN;AACD,EAAA;;;AAGD,EAAA,QAAI,WAAW,EAAf;AACA,EAAA,SAAK,IAAL,GAAY,UAAU,GAAV,EAAe;AACzB,EAAA,aAAO,SAAS,GAAT,CAAP;AACD,EAAA,KAFD;AAGA,EAAA,SAAK,IAAL,GAAY,UAAU,GAAV,EAAe,KAAf,EAAsB;AAChC,EAAA,eAAS,GAAT,IAAgB,KAAhB;AACA,EAAA,aAAO,SAAS,GAAT,CAAP;AACD,EAAA,KAHD;;;AAMA,EAAA,QAAI,UAAU,KAAK,IAAL,CAAU,SAAV,EAAqBA,MAAA,CAAY,IAAZ,EAAkB;AACnD,EAAA,aAAO,EAD4C;AAEnD,EAAA,iBAAW,KAFwC;AAGnD,EAAA,kBAAY,IAHuC;AAInD,EAAA,YAAM,QAJ6C;AAKnD,EAAA,gBAAU,GALyC;AAMnD,EAAA,eAAS;AAN0C,EAAA,KAAlB,CAArB,CAAd;;;AAUA,EAAA,YAAQ,OAAR,CAAgB,IAAhB,CAAqB,QAArB;;;AAGA,EAAA,QAAI,QAAQ,UAAR,KAAuB,KAA3B,EAAkC;AAChC,EAAA,cAAQ,OAAR,CAAgB,IAAhB,CAAqB,YAArB;AACD,EAAA;;;AAGD,EAAA,SAAK,IAAL,CAAU,eAAV,EAA2B;AACzB,EAAA,YAAM,IADmB;AAEzB,EAAA,WAAK,IAFoB;AAGzB,EAAA,UAAI;AAHqB,EAAA,KAA3B;;;AAOA,EAAA,QAAI,UAAU,KAAK,IAAL,CAAU,SAAV,EAAqB,IAAI,OAAJ,EAArB,CAAd;;AAEA,EAAA,SAAK,IAAL,CAAU,SAAV,EAAqB,KAAK,OAAL,EAArB;AACA,EAAA,SAAK,IAAL,CAAU,IAAV,EAAgB,YAAY;AAC1B,EAAA,cAAQ,SAAR,CAAkB,KAAlB,CAAwB,OAAxB,EAAiC,SAAjC;AACD,EAAA,KAFD;AAGA,EAAA,SAAK,IAAL,CAAU,KAAV,EAAiB,YAAY;AAC3B,EAAA,cAAQ,WAAR,CAAoB,KAApB,CAA0B,OAA1B,EAAmC,SAAnC;AACD,EAAA,KAFD;AAGA,EAAA,QAAI,OAAO,KAAK,IAAL,CAAU,MAAV,EAAkB,YAAY;AACvC,EAAA,cAAQ,IAAR,CAAa,KAAb,CAAmB,OAAnB,EAA4B,SAA5B;AACD,EAAA,KAFU,CAAX;;;;AAMA,EAAA,SAAK,QAAL,EAAe,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAf;;;AAGA,EAAA,QAAI,aAAa,KAAK,IAAL,CAAU,YAAV,EAAwB,gBAAxB,CAAjB;AACA,EAAA,eAAW,SAAX,GAAuBG,SAAA,EAAvB;AACA,EAAA,YAAA,CAAc,UAAd,EAA0BC,cAAA,EAA1B;;;AAGA,EAAA,QAAI,aAAa,KAAK,IAAL,CAAU,YAAV,EAAwB,QAAQ,IAAhC,CAAjB;AACA,EAAA,YAAA,CAAc,UAAd,EAA0BC,eAAA,CAAyB,UAAzB,CAA1B;;;AAGA,EAAA,SAAK,IAAL,CAAU,SAAV,EAAqB,EAArB;;AApEmC,EAAA,eAsElB,CAAE,MAAF,EAAU,KAAV,EAAiB,IAAjB,CAtEkB;AAsEnC,EAAA,6CAA0C;AAArC,EAAA,UAAI,gBAAJ;AACH,EAAA,WAAK,MAAL,CAAY,KAAZ;AACD,EAAA;;;AAGD,EAAA,eAAW,gBAAX,CAA4B,OAA5B,EAAqCC,QAAA,CAAc,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAd,EAAsC,QAAQ,QAA9C,CAArC;AACA,EAAA,eAAW,gBAAX,CAA4B,QAA5B,EAAsCA,QAAA,CAAc,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAd,EAAsC,QAAQ,QAA9C,CAAtC;;;AAGA,EAAA,eAAW,gBAAX,CAA4B,OAA5B,EAAqC,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,CAArC;;;AAGA,EAAA,SAAK,UAAL,GAAkB,KAAK,IAAL,CAAU,YAAV,CAAlB;AACA,EAAA,SAAK,EAAL,GAAU,KAAK,IAAL,CAAU,IAAV,CAAV;AACA,EAAA,SAAK,GAAL,GAAW,KAAK,IAAL,CAAU,KAAV,CAAX;AACA,EAAA,SAAK,IAAL,GAAY,KAAK,IAAL,CAAU,MAAV,CAAZ;AACA,EAAA,SAAK,OAAL,GAAe,KAAK,IAAL,CAAU,SAAV,CAAf;AACA,EAAA,SAAK,UAAL,GAAkB,KAAK,IAAL,CAAU,YAAV,CAAlB;;;AAGA,EAAA,SAAK,IAAL,CAAU,SAAV,EAAqB,EAArB;AACA,EAAA,QAAA,CAAY,IAAZ,CAAiB,IAAjB;;;AA3FmC,EAAA,gBA8FlB,CAAE,MAAF,EAAU,KAAV,EAAiB,IAAjB,CA9FkB;AA8FnC,EAAA,iDAA0C;AAArC,EAAA,UAAI,mBAAJ;AACH,EAAA,WAAK,IAAL,CAAU,MAAV;AACD,EAAA;;;AAGD,EAAA,QAAI,QAAQ,SAAZ,EAAuB;AAAA,EAAA,kBACJ,CAAE,MAAF,EAAU,KAAV,EAAiB,IAAjB,CADI;;AACrB,EAAA,mDAA0C;AAArC,EAAA,YAAI,iBAAJ;AACH,EAAA,gBAAA,CAAc,UAAd,EAA0BC,YAAA,CAAsB,IAAtB,CAA1B;AACD,EAAA;AACF,EAAA;AACF,EAAA;;;;+BAES,MAAM;AACd,EAAA,UAAI,OAAO,EAAX;AACA,EAAA,UAAI,UAAU,KAAK,IAAL,CAAU,SAAV,CAAd;;AAEA,EAAA,WAAK,IAAI,SAAT,IAAsB,QAAQ,KAA9B,EAAqC;AACnC,EAAA,YAAI,QAAO,QAAQ,KAAR,CAAc,SAAd,CAAX;AACA,EAAA,YAAI,MAAK,IAAL,KAAc,IAAlB,EAAwB;AACtB,EAAA,iBAAO,KAAP;AACD,EAAA;AACF,EAAA;;AAED,EAAA,aAAO,IAAP;AACD,EAAA;;;6BAEO,MAAM;AACZ,EAAA,UAAI,aAAa,KAAK,IAAL,CAAU,YAAV,CAAjB;AACA,EAAA,UAAI,UAAU,WAAW,aAAX,mBAAyC,IAAzC,CAAd;;AAEA,EAAA,UAAI,OAAO,KAAK,QAAL,CAAc,IAAd,CAAX;;AAEA,EAAA,UAAI,UAAU,SAAS,aAAT,CAAuB,KAAvB,CAAd;AACA,EAAA,cAAQ,SAAR,GAAoBC,aAAA,CAAuB,IAAvB,EAA6B,KAAK,GAAlC,CAApB;AACA,EAAA,cAAQ,SAAR,GAAoBC,WAAA,CAAqB,IAArB,CAApB;;AAEA,EAAA,cAAQ,WAAR,CAAoB,OAApB;;;AAGA,EAAA,WAAK,IAAL,CAAU,SAAV,EAAqB,IAArB,IAA6B,QAAQ,aAAR,CAAsB,gBAAtB,CAA7B;;;AAGA,EAAA,UAAI,OAAO,KAAK,GAAZ,KAAoB,WAApB,IAAmC,OAAO,KAAK,OAAZ,KAAwB,WAA/D,EAA4E;;AAE1E,EAAA,gBAAA,CAAc,UAAd,EAA0BF,YAAA,CAAsB,IAAtB,CAA1B;AACD,EAAA;AACF,EAAA;;;2BAEK,MAAM;AAAA,EAAA;;;AAEV,EAAA,UAAI,OAAO,KAAK,QAAL,CAAc,IAAd,CAAX;AACA,EAAA,UAAI,YAAY,KAAK,IAAL,CAAU,YAAV,EAAwB,aAAxB,mBAAsD,IAAtD,eAAhB;;;AAGA,EAAA,UAAI,OAAO,KAAK,OAAZ,KAAwB,WAA5B,EAAyC;AACvC,EAAA,aAAK,QAAL,CAAc,SAAd,EAAyB,KAAK,OAA9B;AACD,EAAA,OAFD,MAEO,IAAI,OAAO,KAAK,GAAZ,KAAoB,WAAxB,EAAqC;;AAE1C,EAAA,aAAK,MAAL,CAAY,SAAZ,EAAuB,CAAEG,aAAA,CAAuB,KAAK,GAA5B,CAAF,CAAvB,EAA6D;AAC3D,EAAA,gBAAM,IADqD;AAE3D,EAAA,gBAAM;AAFqD,EAAA,SAA7D;;;AAMA,EAAA,aAAA,CAAW,KAAK,GAAhB,EAAqB,UAAC,GAAD,EAAM,GAAN,EAAc;AACjC,EAAA,cAAI,GAAJ,EAAS;;AAEP,EAAA,kBAAK,MAAL,CAAY,OAAZ,EAAqB,CAAEC,gBAAA,CAA0B,GAA1B,CAAF,CAArB,EAAyD;AACvD,EAAA,oBAAM;AADiD,EAAA,aAAzD;;AAIA,EAAA;AACD,EAAA;;;AAGD,EAAA,gBAAK,WAAL,CAAiB,SAAjB,EAA4B;AAC1B,EAAA,kBAAM;AADoB,EAAA,WAA5B;;AAIA,EAAA,gBAAK,QAAL,CAAc,SAAd,EAAyB,GAAzB;AACD,EAAA,SAhBD;AAiBD,EAAA,OAzBM,MAyBA;;;;;AAKL,EAAA,aAAK,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACD,EAAA;AACF,EAAA;;;+BAES,WAAW,KAAK;AACxB,EAAA,gBAAU,KAAV,GAAkB,GAAlB;;;AAGA,EAAA,WAAK,MAAL,CAAY;AACV,EAAA,gBAAQ;AADE,EAAA,OAAZ;AAGD,EAAA;;;6BAEO,GAAG;AACT,EAAA,UAAI,OAAOV,IAAA,CAAU,EAAE,MAAZ,EAAoB,aAApB,CAAX;AACA,EAAA,UAAI,CAAC,IAAL,EAAW;AACT,EAAA;AACD,EAAA;;;;AAID,EAAA,UAAI,gBAAgB,KAAK,IAAL,CAAU,eAAV,CAApB;AACA,EAAA,UAAI,cAAc,IAAd,MAAwB,EAAE,MAAF,CAAS,KAArC,EAA4C;AAC1C,EAAA;AACD,EAAA;;;AAGD,EAAA,oBAAc,IAAd,IAAsB,EAAE,MAAF,CAAS,KAA/B;;;AAGA,EAAA,WAAK,OAAL,CAAa,QAAb,EAAuB;AACrB,EAAA,cAAM,IADe;AAErB,EAAA,cAAMA,IAAA,CAAU,EAAE,MAAZ,EAAoB,aAApB,CAFe;AAGrB,EAAA,iBAAS,cAAc,IAAd;AAHY,EAAA,OAAvB;AAKD,EAAA;;;6BAEO,MAAM,QAAQ;AACpB,EAAA,WAAK,MAAL,CAAY,OAAZ,EAAqB,IAArB,EAA2B,MAA3B;AACD,EAAA;;;2BAEK,GAAG;AACP,EAAA,UAAI,CAACA,IAAA,CAAU,EAAE,MAAZ,EAAoB,aAApB,CAAL,EAAyC;AACvC,EAAA;AACD,EAAA;;AAED,EAAA,UAAI,aAAa,KAAK,IAAL,CAAU,YAAV,CAAjB;AACA,EAAA,UAAI,aAAa,KAAK,IAAL,CAAU,YAAV,CAAjB;AACA,EAAA,iBAAA,CAAiB,UAAjB,EAA6BI,eAAA,CAAyB,UAAzB,CAA7B;;AAEA,EAAA,mBAAa,KAAK,IAAL,CAAU,YAAV,EAAwBJ,IAAA,CAAU,EAAE,MAAZ,EAAoB,aAApB,CAAxB,CAAb;AACA,EAAA,cAAA,CAAc,UAAd,EAA0BI,eAAA,CAAyB,UAAzB,CAA1B;;AAEA,EAAA,QAAE,cAAF;AACD,EAAA;;;+BAEyD;AAAA,EAAA,UAAlD,UAAkD,yDAArC,OAAqC;AAAA,EAAA,UAA5B,QAA4B,yDAAjB,EAAiB;AAAA,EAAA,UAAb,MAAa,yDAAJ,EAAI;;AACxD,EAAA,UAAI,CAAC,SAAS,MAAd,EAAsB;AACpB,EAAA,eAAO,KAAK,WAAL,CAAiB,UAAjB,EAA6B,MAA7B,CAAP;AACD,EAAA;;AAED,EAAA,UAAI,UAAU,KAAK,IAAL,CAAU,SAAV,CAAd;;;AAGA,EAAA,cAAA,CAAc,QAAQ,OAAO,IAAf,CAAd,EAAoCO,WAAA,CAAqB,UAArB,CAApC;;AAEA,EAAA,cAAA,CAAc,KAAK,IAAL,CAAU,YAAV,CAAd,EAAuCC,iBAAA,CAA2B,OAAO,IAAlC,CAAvC;;AAEA,EAAA,UAAI,SAAS,EAAb;AACA,EAAA,eAAS,OAAT,CAAiB,UAAU,GAAV,EAAe;AAC9B,EAAA,kBAAUC,aAAA,CAAuB,GAAvB,CAAV;AACD,EAAA,OAFD;;AAIA,EAAA,cAAQ,OAAO,IAAf,EAAqB,SAArB,GAAiC,MAAjC;AACD,EAAA;;;kCAEY,YAAY,QAAQ;AAC/B,EAAA,UAAI,UAAU,KAAK,IAAL,CAAU,SAAV,CAAd;;AAEA,EAAA,iBAAA,CAAiB,QAAQ,OAAO,IAAf,CAAjB,EAAuCF,WAAA,CAAqB,UAArB,CAAvC;AACA,EAAA,iBAAA,CAAiB,KAAK,IAAL,CAAU,YAAV,CAAjB,EAA0CC,iBAAA,CAA2B,OAAO,IAAlC,CAA1C;AACA,EAAA,cAAQ,OAAO,IAAf,EAAqB,SAArB,GAAiC,EAAjC;AACD,EAAA;;;;;;;gCAIU;AACT,EAAA,UAAI,UAAU,KAAK,IAAL,CAAU,SAAV,CAAd;AACA,EAAA,UAAI,UAAU,KAAK,IAAL,CAAU,SAAV,CAAd;;;;;AAKA,EAAA,UAAI,QAAQ,QAAR,KAAqB,KAAzB,EAAgC;AAC9B,EAAA,eAAO,YAAY;AACjB,EAAA,kBAAQ,OAAR,CAAgB,KAAhB,CAAsB,OAAtB,EAA+B,SAA/B;AACD,EAAA,SAFD;AAGD,EAAA;;;AAGD,EAAA,UAAI,WAAW,EAAf;;AAEA,EAAA,UAAI,WAAW,EAAf;;AAEA,EAAA,aAAO,UAAU,KAAV,EAA4C;AAAA,EAAA;;AAAA,EAAA,yEAAJ,EAAI;;AAAA,EAAA,6BAAzB,IAAyB;AAAA,EAAA,YAAzB,IAAyB,6BAAlB,SAAkB;;AACjD,EAAA,YAAI,SAAS,IAAT,CAAJ,EAAoB;;AAElB,EAAA,mBAAS,IAAT,IAAiB,IAAjB;AACD,EAAA,SAHD,MAGO;;AAEL,EAAA,kBAAQ,OAAR,CAAgB,KAAhB,CAAsB,OAAtB,EAA+B,SAA/B;AACD,EAAA;;AAED,EAAA,qBAAa,SAAS,IAAT,CAAb;;;AAGA,EAAA,iBAAS,IAAT,IAAiB,WAAW,YAAM;;;AAGhC,EAAA,cAAI,SAAS,IAAT,CAAJ,EAAoB;AAClB,EAAA,oBAAQ,OAAR,CAAgB,KAAhB,CAAsB,OAAtB;AACD,EAAA;;AAED,EAAA,mBAAS,IAAT,IAAiB,IAAjB;AACA,EAAA,mBAAS,IAAT,IAAiB,IAAjB;AACD,EAAA,SATgB,EASd,QAAQ,QATM,CAAjB;AAUD,EAAA,OAtBD;AAuBD,EAAA;;;;;;;;AAIH,EAAA,OAAO,MAAP,GAAgB,YAAY;AAC1B,EAAA,SAAOE,QAAA,CAAgB,KAAhB,CAAsB,IAAtB,EAA4B,SAA5B,CAAP;AACD,EAAA,CAFD;;EAMA,cAAc,MAAd;;;;"}